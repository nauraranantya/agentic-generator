# Execution time: 164.90 seconds
# Model used: gpt-5-mini

# Issues / Assumptions:
# - The ontology lacks explicit classes/properties for: input/output JSON Schemas, suspend/resume semantics, workflow control constructs (parallel, branch, map, doUntil), elicitation interactive flows, middleware, processors as first-class runnable components, scorers as executable artifacts, and memory configuration details. These had to be represented as literals (descriptions) or using existing generic properties.
# - The ontology does not provide a direct property to link an Agent to a WorkflowPattern (hasWorkflowPattern has domain Team). We reuse :hasWorkflowPattern to indicate which workflows an agent can execute.
# - The ontology does not define an MCPServer class. MCP servers are represented as :Environment individuals (closest available class) and MCP resources as beam:Resource individuals.
# - Input/output/validation schemas (zod / JSON Schema) and JavaScript implementation details are modeled as plain literals under dcterms:description or prompt-related properties to preserve fidelity. No code is embedded — only semantic content and schema text are preserved as literals.
# - Processors (moderation, PII detectors, prompt injection detectors), scorers, and middleware are modeled as :Capability or described in dcterms:description because the ontology lacks dedicated classes/properties for processors/scorers/middleware.
# - Interactive elicitation flow (the CLI elicitation handler) is modeled as a Prompt and described on the tool that triggers it. The session and runtime behavior are captured as description literals.
# - Where the ontology provided more specific properties (e.g., :agentToolUsage, :useLanguageModel, :hasKnowledge), those were used. For relationships not directly supported, descriptions preserve the necessary configuration and logic.

@prefix : <http://www.w3id.org/agentic-ai/onto#> .
@prefix pp: <http://purl.org/net/p-plan#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix xml: <http://www.w3.org/XML/1998/namespace> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix beam: <http://w3id.org/beam/core#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@base <http://www.w3id.org/agentic-ai/onto#> .

#################################################################
# Language Models
#################################################################

:gpt4o_mini rdf:type :LanguageModel ;
    rdfs:label "openai:gpt-4o-mini" ;
    <http://purl.org/dc/terms/description> "Statistical language model used by several agents (referenced as openai('gpt-4o-mini') in source). Used for agent responses with moderate capacity." .

:gpt4o rdf:type :LanguageModel ;
    rdfs:label "openai:gpt-4o" ;
    <http://purl.org/dc/terms/description> "Statistical language model referenced as openai('gpt-4o'). Used for higher-capacity agent behavior." .

:gpt4_1_nano rdf:type :LanguageModel ;
    rdfs:label "openai:gpt-4.1-nano" ;
    <http://purl.org/dc/terms/description> "Small moderation model used by ModerationProcessor in the system (openai('gpt-4.1-nano'))." .

:google_gemini_2_flash rdf:type :LanguageModel ;
    rdfs:label "google:gemini-2.0-flash-001" ;
    <http://purl.org/dc/terms/description> "Google language model used for certain detectors in the code (gemini-2.0-flash-001)." .

#################################################################
# Knowledge Bases / Memory
#################################################################

:globalMemory rdf:type :Memory ;
    rdfs:label "Global Memory (Mastra Memory instance)" ;
    <http://purl.org/dc/terms/description> """
    Memory instance with workingMemory enabled in some agent configurations.
    Source semantics:
      - workingMemory.enabled: true (for some agents)
      - used as an agent knowledge base to store short-term context and conversation history.
    Implementation details omitted; configuration preserved here.
    """ .

:chefAgentMemory rdf:type :Memory ;
    rdfs:label "Chef Agent Memory (per-agent)" ;
    <http://purl.org/dc/terms/description> """
    Memory instance used by Chef agents. Options: workingMemory enabled.
    Purpose: store per-agent conversation state and short-term context.
    """ .

#################################################################
# Tools (Tool instances)
#################################################################

:cookingTool rdf:type :Tool ;
    rdfs:label "cooking-tool" ;
    <http://purl.org/dc/terms/description> """
    Tool ID: cooking-tool
    Description: Used to cook given an ingredient
    Input schema (zod): { ingredient: string }
    Behavior: Simulated long-running operation (sleep ~5000ms). Logs the ingredient and returns 'My tool result'.
    Note: When available, context.agent.toolCallId is logged by the tool for tracing.
    """ .

:weatherInfoTool rdf:type :Tool ;
    rdfs:label "weather-info" ;
    <http://purl.org/dc/terms/description> """
    Tool ID: weather-info
    Description: Fetches the current weather information for a given city.
    Input schema: { city: string }
    Returns: an object with city, weather, temperature_celsius, temperature_fahrenheit, humidity, wind.
    """ .

:calculatorTool rdf:type :Tool ;
    rdfs:label "calculator" ;
    <http://purl.org/dc/terms/description> """
    Tool ID: calculator
    Description: Performs basic arithmetic operations (add, subtract).
    Input schema: { num1: number, num2: number, operation: 'add'|'subtract' }
    Output: numeric result.
    """ .

:fetchWeatherTool rdf:type :Tool ;
    rdfs:label "fetchWeather" ;
    <http://purl.org/dc/terms/description> """
    Tool ID: fetchWeather
    Description: Simulated forecast for a city. Uses a simple mapping from city to temperature string.
    Input schema: { city: string }
    Output: string describing weather (e.g., 'The weather in X is 20°C and sunny.').
    """ .

:stringUtilsTool rdf:type :Tool ;
    rdfs:label "stringUtils" ;
    <http://purl.org/dc/terms/description> """
    Tool ID: stringUtils
    Description: Performs utility operations on strings (uppercase, reverse).
    Input schema: { text: string, action: 'uppercase'|'reverse' }
    Output: transformed text.
    Note: Source code had a small bug (used inputData variable in execute); semantic behavior preserved here.
    """ .

:greetUserTool rdf:type :Tool ;
    rdfs:label "greetUser" ;
    <http://purl.org/dc/terms/description> """
    Tool ID: greetUser
    Description: Generates a personalized greeting.
    Input schema: { name: string }
    Output: greeting string 'Hello, {name}! Welcome to the MCP server.'
    """ .

:collectContactInfoTool rdf:type :Tool ;
    rdfs:label "collectContactInfo" ;
    <http://purl.org/dc/terms/description> """
    Tool ID: collectContactInfo
    Description: Collects user contact information through elicitation (interactive).
    Input schema: { reason?: string }
    Behavior:
      - Calls MCP elicitation session to send a request with JSON schema (name, email, phone).
      - Waits for user response via an elicitation handler. Interprets actions: accept/reject/cancel.
      - Returns a string summarizing collection outcome or an error.
    Elicitation requestedSchema (JSON):
      {
        type: 'object',
        properties: {
          name: { type: 'string', title: 'Full Name', description: 'Your full name' },
          email: { type: 'string', title: 'Email Address', description: 'Your email address', format: 'email' },
          phone: { type: 'string', title: 'Phone Number', description: 'Your phone number (optional)' }
        },
        required: ['name','email']
      }
    """ .

#################################################################
# Workflow Patterns & Workflow Steps
#################################################################

# recipe-maker workflow (myWorkflow)
:recipeMakerWorkflow rdf:type :WorkflowPattern ;
    rdfs:label "recipe-maker" ;
    <http://purl.org/dc/terms/description> "Workflow: Returns a recipe based on an ingredient. Input: { ingredient: string }. Output: { result: string }." ;
    :hasWorkflowStep :step_my_step, :step_my_step_2 .

:step_my_step rdf:type :WorkflowStep ;
    rdfs:label "my-step" ;
    :stepOrder 1 ;
    <http://purl.org/dc/terms/description> """
    Step ID: my-step
    Input schema: { ingredient: string }
    Output schema: { result: string }
    Execution: Simulates a 3000ms delay then returns { result: ingredient }.
    """ ;
    :hasAssociatedTask :task_my_step .

:task_my_step rdf:type :Task ;
    rdfs:label "task:my-step" ;
    <http://purl.org/dc/terms/description> "Task backing my-step. Performs the core recipe extraction (echo ingredient back) and returns result string." ;
    :producedResource :recipe_result_resource ;
    :performedByAgent :chefAgent .

:step_my_step_2 rdf:type :WorkflowStep ;
    rdfs:label "my-step-2" ;
    :stepOrder 2 ;
    <http://purl.org/dc/terms/description> """
    Step ID: my-step-2
    Input schema: { result: string }
    Output schema: { result: string }
    Execution: Simulates a 3000ms delay, returns { result: 'suh' } (placeholder behavior).
    """ ;
    :hasAssociatedTask :task_my_step_2 .

:task_my_step_2 rdf:type :Task ;
    rdfs:label "task:my-step-2" ;
    <http://purl.org/dc/terms/description> "Second step in recipe-maker that finalizes the output; returns static placeholder 'suh' in the source." ;
    :performedByAgent :chefAgent .

# lessComplexWorkflow (complex text processor example)
:lessComplexWorkflow rdf:type :WorkflowPattern ;
    rdfs:label "lessComplexWorkflow" ;
    <http://purl.org/dc/terms/description> """
    Complex workflow that:
      - Runs add-letter step
      - Executes two steps in parallel (add-letter-b, add-letter-c)
      - Maps parallel outputs to a single text
      - Branches on text length (short-text vs long-text)
      - Runs nestedTextProcessor
      - Loops with add-letter-with-count until text length >= 20
      - Presents suspend-resume step that requires user input
      - Runs final-step to produce final string '-ENDED'
    Input/Output: strings and counters as described by steps.
    """ ;
    :hasWorkflowStep :step_add_letter, :step_add_letter_b, :step_add_letter_c, :step_add_letter_with_count, :step_suspend_resume, :step_short_text, :step_long_text, :step_final_step, :step_nested_text_processor .

# individual steps
:step_add_letter rdf:type :WorkflowStep ;
    rdfs:label "add-letter" ;
    :stepOrder 1 ;
    <http://purl.org/dc/terms/description> "Appends 'A' to input text. Input: { text: string }" ;
    :hasAssociatedTask :task_add_letter .

:task_add_letter rdf:type :Task ;
    rdfs:label "task:add-letter" ;
    <http://purl.org/dc/terms/description> "Execution: returns { text: text + 'A' } after ~500ms." ;
    :performedByAgent :chefModelV2Agent .

:step_add_letter_b rdf:type :WorkflowStep ;
    rdfs:label "add-letter-b" ;
    :stepOrder 2 ;
    <http://purl.org/dc/terms/description> "Appends 'B' to input text." ;
    :hasAssociatedTask :task_add_letter_b .

:task_add_letter_b rdf:type :Task ;
    rdfs:label "task:add-letter-b" ;
    <http://purl.org/dc/terms/description> "Execution: returns { text: text + 'B' }." ;
    :performedByAgent :chefModelV2Agent .

:step_add_letter_c rdf:type :WorkflowStep ;
    rdfs:label "add-letter-c" ;
    :stepOrder 3 ;
    <http://purl.org/dc/terms/description> "Appends 'C' to input text." ;
    :hasAssociatedTask :task_add_letter_c .

:task_add_letter_c rdf:type :Task ;
    rdfs:label "task:add-letter-c" ;
    <http://purl.org/dc/terms/description> "Execution: returns { text: text + 'C' }." ;
    :performedByAgent :chefModelV2Agent .

:step_add_letter_with_count rdf:type :WorkflowStep ;
    rdfs:label "add-letter-with-count" ;
    :stepOrder 4 ;
    <http://purl.org/dc/terms/description> """
    Adds 'D' to text and increments iterationCount.
    Input: { text: string, iterationCount?: number }
    Output: { text: string, iterationCount: number }
    """ ;
    :hasAssociatedTask :task_add_letter_with_count .

:task_add_letter_with_count rdf:type :Task ;
    rdfs:label "task:add-letter-with-count" ;
    <http://purl.org/dc/terms/description> "Execution: returns text + 'D' and iterationCount+1." ;
    :performedByAgent :chefModelV2Agent .

:step_suspend_resume rdf:type :WorkflowStep ;
    rdfs:label "suspend-resume" ;
    :stepOrder 5 ;
    <http://purl.org/dc/terms/description> """
    Suspend/resume step:
      - suspendSchema: { reason: string }
      - resumeSchema: { userInput: string }
      - Execution: if resumeData.userInput absent -> suspend({ reason: 'Please provide user input to continue' })
                   else returns { text: text + resumeData.userInput }.
    """ ;
    :hasAssociatedTask :task_suspend_resume .

:task_suspend_resume rdf:type :Task ;
    rdfs:label "task:suspend-resume" ;
    <http://purl.org/dc/terms/description> "Requires user input to resume. Modeled as a suspend/resume interactive step." ;
    :performedByAgent :chefAgent .

:step_short_text rdf:type :WorkflowStep ;
    rdfs:label "short-text" ;
    :stepOrder 6 ;
    <http://purl.org/dc/terms/description> "Appends 'S' to short texts (branch target)." ;
    :hasAssociatedTask :task_short_text .

:task_short_text rdf:type :Task ;
    rdfs:label "task:short-text" ;
    <http://purl.org/dc/terms/description> "Branch step executed when text length <= 10." ;
    :performedByAgent :chefModelV2Agent .

:step_long_text rdf:type :WorkflowStep ;
    rdfs:label "long-text" ;
    :stepOrder 7 ;
    <http://purl.org/dc/terms/description> "Appends 'L' to long texts (branch target)." ;
    :hasAssociatedTask :task_long_text .

:task_long_text rdf:type :Task ;
    rdfs:label "task:long-text" ;
    <http://purl.org/dc/terms/description> "Branch step executed when text length > 10." ;
    :performedByAgent :chefModelV2Agent .

:step_nested_text_processor rdf:type :WorkflowStep ;
    rdfs:label "nested-text-processor" ;
    :stepOrder 8 ;
    <http://purl.org/dc/terms/description> "Nested workflow that runs add-letter then add-letter-b (see nestedTextProcessor workflow pattern below)." ;
    :hasAssociatedTask :task_nested_text_processor .

:task_nested_text_processor rdf:type :Task ;
    rdfs:label "task:nested-text-processor" ;
    <http://purl.org/dc/terms/description> "Executes nested sub-workflow that appends letters A then B." ;
    :performedByAgent :chefModelV2Agent .

:step_final_step rdf:type :WorkflowStep ;
    rdfs:label "final-step" ;
    :stepOrder 99 ;
    <http://purl.org/dc/terms/description> "Finalization step, appends '-ENDED' to the text." ;
    :hasAssociatedTask :task_final_step .

:task_final_step rdf:type :Task ;
    rdfs:label "task:final-step" ;
    <http://purl.org/dc/terms/description> "Finalization operation adding '-ENDED'." ;
    :performedByAgent :chefAgent .

# nested workflows (data-processing and my-workflow)
:nestedWorkflow rdf:type :WorkflowPattern ;
    rdfs:label "data-processing" ;
    <http://purl.org/dc/terms/description> """
    Nested workflow (id: data-processing). Steps: stepOne -> stepTwo -> stepThree -> stepFour.
    Purpose: numeric transformations (double, increment, triple, parity check).
    Input: { inputValue: number }, Output: { isEven: boolean }.
    """ ;
    :hasWorkflowStep :step_one_numeric, :step_two_numeric, :step_three_numeric, :step_four_numeric .

:step_one_numeric rdf:type :WorkflowStep ;
    rdfs:label "stepOne" ;
    :stepOrder 1 ;
    <http://purl.org/dc/terms/description> "Doubles inputValue after simulated delay (~10000ms)." ;
    :hasAssociatedTask :task_step_one .

:task_step_one rdf:type :Task ;
    rdfs:label "task:stepOne" ;
    <http://purl.org/dc/terms/description> "Takes { inputValue }, returns { doubledValue: inputValue*2 }." ;
    :performedByAgent :dynamicAgent .

:step_two_numeric rdf:type :WorkflowStep ;
    rdfs:label "stepTwo" ;
    :stepOrder 2 ;
    <http://purl.org/dc/terms/description> "Requires suspend/resume semantics (suspends when resumeData.extraNumber missing)." ;
    :hasAssociatedTask :task_step_two .

:task_step_two rdf:type :Task ;
    rdfs:label "task:stepTwo" ;
    <http://purl.org/dc/terms/description> "If resumeData.extraNumber absent => suspend({}) and return interim; else compute incrementedValue." ;
    :performedByAgent :dynamicAgent .

:step_three_numeric rdf:type :WorkflowStep ;
    rdfs:label "stepThree" ;
    :stepOrder 3 ;
    <http://purl.org/dc/terms/description> "Triples the incoming incrementedValue." ;
    :hasAssociatedTask :task_step_three .

:task_step_three rdf:type :Task ;
    rdfs:label "task:stepThree" ;
    <http://purl.org/dc/terms/description> "Returns { tripledValue: incrementedValue * 3 }." ;
    :performedByAgent :dynamicAgent .

:step_four_numeric rdf:type :WorkflowStep ;
    rdfs:label "stepFour" ;
    :stepOrder 4 ;
    <http://purl.org/dc/terms/description> "Determines whether tripledValue is even." ;
    :hasAssociatedTask :task_step_four .

:task_step_four rdf:type :Task ;
    rdfs:label "task:stepFour" ;
    <http://purl.org/dc/terms/description> "Returns { isEven: tripledValue % 2 === 0 }." ;
    :performedByAgent :dynamicAgent .

:myWorkflowX rdf:type :WorkflowPattern ;
    rdfs:label "my-workflow" ;
    <http://purl.org/dc/terms/description> "Workflow that wraps the nested data-processing workflow." ;
    :hasSubPattern :nestedWorkflow .

#################################################################
# Workflow Output artifacts (resources)
#################################################################

:recipe_result_resource rdf:type beam:Resource ;
    rdfs:label "recipe-result" ;
    <http://purl.org/dc/terms/description> "String output produced by recipe-maker workflow step (result: string)." .

#################################################################
# Agents (LLMAgents)
#################################################################

:chefAgent rdf:type :LLMAgent ;
    :agentID "chef-agent" ;
    rdfs:label "Chef Agent" ;
    <http://purl.org/dc/terms/description> """
    A chef agent that helps users cook meals with available ingredients.
    Instructions (system): YOU MUST USE THE TOOL cooking-tool
    Model: openai('gpt-4o-mini')
    Tools: cookingTool, weatherInfo
    Workflows: recipe-maker
    Memory: per-agent Memory instance (workingMemory enabled)
    Voice: OpenAIVoice (voice behavior noted)
    Input processors: various (PII, detectors available in system)
    """ ;
    :useLanguageModel :gpt4o_mini ;
    :agentToolUsage :cookingTool, :weatherInfoTool ;
    :hasWorkflowPattern :recipeMakerWorkflow ;
    :hasKnowledge :chefAgentMemory ;
    :hasPrompt :chefAgent_instructions_prompt .

:chefAgent_instructions_prompt rdf:type :Prompt ;
    rdfs:label "Chef Agent Instructions Prompt" ;
    :promptInstruction """YOU MUST USE THE TOOL cooking-tool
You are Michel, a practical and experienced home chef who helps people cook great meals with whatever
ingredients they have available. Your first priority is understanding what ingredients and equipment the user has access to, then suggesting achievable recipes.
You explain cooking steps clearly and offer substitutions when needed, maintaining a friendly and encouraging tone throughout.
""" .

:chefAgentResponses rdf:type :LLMAgent ;
    :agentID "chef-agent-responses" ;
    rdfs:label "Chef Agent Responses" ;
    <http://purl.org/dc/terms/description> """
    Variation of Chef Agent that uses openai.responses('gpt-4o').
    Tools provided dynamically: web_search_preview, cooking_tool.
    Has workflows: recipe-maker.
    Input processors: multiple processors including a 'no-soup-for-you' and 'remove-spinach' transforms.
    """ ;
    :useLanguageModel :gpt4o ;
    :agentToolUsage :cookingTool, :weatherInfoTool ;
    :hasWorkflowPattern :recipeMakerWorkflow ;
    :hasKnowledge :chefAgentMemory .

:chefModelV2Agent rdf:type :LLMAgent ;
    :agentID "chef-model-v2-agent" ;
    rdfs:label "Chef Agent V2 Model" ;
    <http://purl.org/dc/terms/description> """
    A chef agent using model-v2 wrapper and additional middleware for logging (logDataMiddleware).
    Instructions (system): Michel chef persona with explicit system instruction content (see prompt).
    Model: wrapped openai_v5('gpt-4o-mini') with logging middleware.
    Tools: weatherInfo, cookingTool
    Workflows: myWorkflow (recipe-maker), lessComplexWorkflow
    Scorers: references a scorer provided by Mastra (scorer1)
    Memory: Memory instance (workingMemory enabled)
    Input processors: moderationProcessor present
    """ ;
    :useLanguageModel :gpt4o_mini ;
    :agentToolUsage :weatherInfoTool, :cookingTool ;
    :hasWorkflowPattern :recipeMakerWorkflow, :lessComplexWorkflow ;
    :hasKnowledge :chefAgentMemory ;
    :hasPrompt :chefModelV2_instructions_prompt ;
    :hasAgentCapability :moderation_capability .

:chefModelV2_instructions_prompt rdf:type :Prompt ;
    rdfs:label "Chef Model V2 Instructions" ;
    :promptInstruction """
You are Michel, a practical and experienced home chef who helps people cook great meals with whatever
ingredients they have available. Your first priority is understanding what ingredients and equipment the user has access to, then suggesting achievable recipes.
You explain cooking steps clearly and offer substitutions when needed, maintaining a friendly and encouraging tone throughout.
""" .

:dynamicAgent rdf:type :LLMAgent ;
    :agentID "dynamic-agent" ;
    rdfs:label "Dynamic Agent" ;
    <http://purl.org/dc/terms/description> """
    Agent with runtime-determined instructions, model, and tools depending on requestContext.
    - If requestContext.get('foo') true: instructions = 'You are a dynamic agent', model=openai('gpt-4o'), extra tool: web_search_preview
    - Else: static mode with openai('gpt-4o-mini') and basic cookingTool
    """ ;
    :hasKnowledge :globalMemory ;
    :agentToolUsage :cookingTool .

:agentThatHarassesYou rdf:type :LLMAgent ;
    :agentID "agent-that-harasses-you" ;
    rdfs:label "Agent That Harasses You" ;
    <http://purl.org/dc/terms/description> "An intentionally abusive agent persona (used in tests). Output processors include moderation to block content." ;
    :useLanguageModel :gpt4o ;
    :hasAgentCapability :moderation_capability .

:errorAgent rdf:type :LLMAgent ;
    :agentID "error-agent" ;
    rdfs:label "Error Agent" ;
    <http://purl.org/dc/terms/description> "Agent configured to always error (test stub). Model: gpt-4o-mini." ;
    :useLanguageModel :gpt4o_mini .

:networkAgent rdf:type :LLMAgent ;
    :agentID "network-agent" ;
    rdfs:label "Chef Network" ;
    <http://purl.org/dc/terms/description> """
    Manager agent that orchestrates other agents and tools.
    Agents: weatherAgent is included as a managed/sub-agent.
    Instructions: choose best primitives to accomplish user's request.
    """ ;
    :hasAgentMember :weatherAgent ;
    :hasKnowledge :globalMemory ;
    :useLanguageModel :gpt4o_mini ;
    :agentToolUsage :weatherInfoTool, :cookingTool .

:weatherAgent rdf:type :LLMAgent ;
    :agentID "weather-agent" ;
    rdfs:label "Weather Agent" ;
    <http://purl.org/dc/terms/description> "Agent whose goal is to execute the recipe-maker workflow with a given ingredient. Uses weatherInfo tool. Model: gpt-4o-mini." ;
    :useLanguageModel :gpt4o_mini ;
    :agentToolUsage :weatherInfoTool ;
    :hasWorkflowPattern :recipeMakerWorkflow .

:evalAgent rdf:type :LLMAgent ;
    :agentID "eval-agent" ;
    rdfs:label "Eval Agent" ;
    <http://purl.org/dc/terms/description> """
    Evaluation agent with a weather tool used in eval contexts.
    Model: openai('gpt-4o')
    Tools: weatherInfo
    Scorers: answerRelevance scorer attached
    Memory: workingMemory enabled
    """ ;
    :useLanguageModel :gpt4o ;
    :agentToolUsage :weatherInfoTool ;
    :hasKnowledge :globalMemory ;
    :hasAgentCapability :scorer_answer_relevance .

#################################################################
# Capabilities / Processors / Scorers (modeled as Capability)
#################################################################

:moderation_capability rdf:type :Capability ;
    rdfs:label "Moderation Processor" ;
    <http://purl.org/dc/terms/description> """
    ModerationProcessor configuration:
      - model: openai('gpt-4.1-nano')
      - categories: ['hate','harassment','violence']
      - threshold: 0.7
      - strategy: 'block'
      - purpose: detect and block inappropriate content
    Modeled as a Capability used by agents as input processor.
    """ .

:pii_detector_capability rdf:type :Capability ;
    rdfs:label "PII Detector" ;
    <http://purl.org/dc/terms/description> "PII detection processor used to redact or mask PII; modeled as a capability." .

:prompt_injection_detector_capability rdf:type :Capability ;
    rdfs:label "Prompt Injection Detector" ;
    <http://purl.org/dc/terms/description> "A prompt injection detector that can block malicious instructions (modeled as capability)." .

:scorer_test_scorer1 rdf:type :Capability ;
    rdfs:label "testScorer (scorer1)" ;
    <http://purl.org/dc/terms/description> "A scorer named scorer1 that returns a constant score 1 in the source. Used by Mastra as a scoring primitive." .

:scorer_answer_relevance rdf:type :Capability ;
    rdfs:label "Answer Relevancy Scorer" ;
    <http://purl.org/dc/terms/description> "Prebuilt answer relevancy scorer (createAnswerRelevancyScorer) using openai('gpt-4o'). Used by evalAgent." .

#################################################################
# MCP Servers (represented as Environments) and Resources
#################################################################

:myMcpServerTwoEnv rdf:type :Environment ;
    rdfs:label "My Utility MCP Server (myMcpServerTwo)" ;
    <http://purl.org/dc/terms/description> "MCP server providing tools, agents, workflows, and weather resources." ;
    :containsResource :resource_weather_current, :resource_weather_forecast, :resource_weather_historical ;
    :hasWorkflowPattern :recipeMakerWorkflow ;
    :hasAgentMember :chefAgent .

:myMcpServerEnv rdf:type :Environment ;
    rdfs:label "My Calculation & Data MCP Server (myMcpServer)" ;
    <http://purl.org/dc/terms/description> "MCP server providing calculator and fetchWeather tools." ;
    :containsResource :resource_weather_current .

# Weather resources exposed by myMcpServerTwo
:resource_weather_current rdf:type beam:Resource ;
    rdfs:label "weather://current" ;
    <http://purl.org/dc/terms/title> "Current Weather Data" ;
    <http://purl.org/dc/terms/description> "Real-time weather data for the current location (JSON). Example content includes location, temperature, humidity, windSpeed, updated timestamp." .

:resource_weather_forecast rdf:type beam:Resource ;
    rdfs:label "weather://forecast" ;
    <http://purl.org/dc/terms/title> "Weather Forecast" ;
    <http://purl.org/dc/terms/description> "5-day weather forecast (JSON array)." .

:resource_weather_historical rdf:type beam:Resource ;
    rdfs:label "weather://historical" ;
    <http://purl.org/dc/terms/title> "Historical Weather Data" ;
    <http://purl.org/dc/terms/description> "Historical metrics (averageHigh, averageLow, rainDays, sunnyDays, recordHigh, recordLow)." .

#################################################################
# MCP Tools mapping (associate tools with MCP server environment)
#################################################################

:myMcpServerTwoEnv :hasToolConfig :stringUtilsTool, :greetUserTool, :collectContactInfoTool .

#################################################################
# Elicitation Prompt and Flow (used by collectContactInfo tool)
#################################################################

:collectContactInfo_elicitation_prompt rdf:type :Prompt ;
    rdfs:label "collectContactInfo Elicitation Request" ;
    :promptInstruction """
Please provide your contact information.
Schema:
{
  "type": "object",
  "properties": {
    "name": { "type": "string", "title": "Full Name", "description": "Your full name" },
    "email": { "type": "string", "title": "Email Address", "description": "Your email address", "format": "email" },
    "phone": { "type": "string", "title": "Phone Number", "description": "Your phone number (optional)" }
  },
  "required": ["name","email"]
}
""" ;
    :promptContext "Used by collectContactInfo tool to request user input via an elicitation handler (interactive CLI or session-aware flow)." .

:collectContactInfoTool :taskPrompt :collectContactInfo_elicitation_prompt .

#################################################################
# Relationships: Agents -> Tools and Workflows (explicit)
#################################################################

:chefAgent :agentToolUsage :cookingTool, :weatherInfoTool .
:chefAgentResponses :agentToolUsage :cookingTool, :weatherInfoTool .
:chefModelV2Agent :agentToolUsage :cookingTool, :weatherInfoTool .
:dynamicAgent :agentToolUsage :cookingTool .
:networkAgent :agentToolUsage :weatherInfoTool, :cookingTool .
:evalAgent :agentToolUsage :weatherInfoTool .

#################################################################
# Tasks performed by Tools (examples)
#################################################################

# Tools performing tasks: some tasks are performed by tools instead of agents in the source (e.g., weatherInfo and calculator)
:task_fetch_weather rdf:type :Task ;
    rdfs:label "task:fetchWeather" ;
    <http://purl.org/dc/terms/description> "Task executed by fetchWeather tool: returns textual forecast for the given city." ;
    :performedBy :fetchWeatherTool .

:task_calculator_add rdf:type :Task ;
    rdfs:label "task:calculator" ;
    <http://purl.org/dc/terms/description> "Calculator tool performs arithmetic operations requested by agent or workflow." ;
    :performedBy :calculatorTool .

#################################################################
# Teams (system grouping) & Workflow Patterns assigned to Team
#################################################################

:mastraSystem rdf:type :Team ;
    rdfs:label "Mastra System" ;
    <http://purl.org/dc/terms/description> "The system instance that contains agents, workflows, processors, MCP servers, and tools as configured in the source." ;
    :hasAgentMember :chefAgent, :chefAgentResponses, :dynamicAgent, :agentThatHarassesYou, :evalAgent, :chefModelV2Agent, :networkAgent ;
    :hasWorkflowPattern :recipeMakerWorkflow, :lessComplexWorkflow, :nestedWorkflow, :myWorkflowX ;
    :hasSystemConfig :mastra_system_config .

:mastra_system_config rdf:type :Config ;
    rdfs:label "Mastra system config" ;
    :configKey "storage" ;
    :configValue "LibSQLStore file:./mastra.db (id: mastra-storage)" .

#################################################################
# Additional artifacts: logging middleware and observability (captured as descriptions)
#################################################################

:logging_middleware rdf:type :Config ;
    rdfs:label "logDataMiddleware (LanguageModel v2 middleware)" ;
    <http://purl.org/dc/terms/description> """
    Middleware that logs raw model responses and stream chunks to disk (stream-{i}.json).
    Used by chef-model-v2-agent via wrapped language model (wrapLanguageModel + logDataMiddleware).
    """ .

:observability_config rdf:type :Config ;
    rdfs:label "Observability config" ;
    <http://purl.org/dc/terms/description> "Observability enabled by default for Mastra (observability.default.enabled = true)." .

#################################################################
# Metadata about Agents' goals / instructions as Prompts
#################################################################

:networkAgent_instructions_prompt rdf:type :Prompt ;
    rdfs:label "Network Agent Instructions" ;
    :promptInstruction "You are the manager of several agents, tools, and workflows. Use the best primitives based on what the user wants to accomplish your task." .

:chefAgent_goal rdf:type :Goal ;
    rdfs:label "Chef Agent Goal (Recipe Retrieval)" ;
    <http://purl.org/dc/terms/description> "Return a useful recipe given an ingredient and available tools/equipment." .

:chefAgent :hasAgentGoal :chefAgent_goal .

#################################################################
# Misc: processors & detectors attached to agents via descriptive linking
#################################################################

:pii_detector rdf:type :Capability ;
    rdfs:label "PII Detector (configured)" ;
    <http://purl.org/dc/terms/description> "Configured with openai('gpt-4o') in source and used as an input processor to redact PII." .

:prompt_injection_detector rdf:type :Capability ;
    rdfs:label "Prompt Injection Detector (configured)" ;
    <http://purl.org/dc/terms/description> "Configured with google gemini model in source; blocks prompt injection." .

# Attach processors/scorers to agents via hasAgentCapability
:chefAgent :hasAgentCapability :pii_detector, :prompt_injection_detector .
:chefAgentResponses :hasAgentCapability :pii_detector, :prompt_injection_detector .
:chefModelV2Agent :hasAgentCapability :moderation_capability .

#################################################################
# Final notes: Preservation of schemas and key configuration details
#################################################################

# For each Task or Prompt above, the dcterms:description literal preserves:
#  - input schema (zod/JSON Schema) where present
#  - intended output schema
#  - execution semantics (Delays, suspend/resume, branching conditions)
#  - references to model and tools to reproduce agent behavior at a semantic level.
# No additional classes or properties were introduced beyond the existing ontology.
