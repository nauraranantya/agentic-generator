# Execution time: 77.15 seconds
# Model used: gpt-5-mini

# Issues / Assumptions:
# - The ontology lacks explicit classes/properties for streaming semantics (e.g., a streaming Response or TextStream), masking/annotation tags, and UI artifacts (spinner, masking). These runtime/UX details are represented as literals (descriptions) on resources/tasks.
# - Session parameters (threadId, resourceId) exist in code but there is no dedicated property for "session" or "parameter" objects; they are modeled using the existing Config class and :hasConfig. This is an approximation.
# - Environment secrets (FIREWORKS_API_KEY) are stored as Config instances with literal notes. The ontology has no secret/credential type nor security metadata, so sensitive values are not captured (only placeholders/requirements).
# - The code-level constructs (e.g., event loop, Readline, maskStreamTags, ora spinner, crypto.randomUUID) are implementation details and cannot be fully modeled; they are summarized in descriptions attached to Task/Resource individuals.
# - Iterative/dynamic runtime instances (each chat turn) are represented as a single Task template (ChatInteractionTask). The ontology does not provide a native construct for repeated runtime events; creating an individual per runtime turn is possible but omitted to avoid inventing temporal/event modeling beyond the schema.
# - Logging configuration (PinoLogger) and the Mastra runtime are modeled as system-level Config and a Team (Mastra System). There is no dedicated Logger class in the ontology, so logger settings are represented as Config key/value pairs.
# - No new classes or properties were created; existing classes/properties from the provided ontology were used. Where direct modeling was not possible, descriptive literals were used.

@prefix : <http://www.w3id.org/agentic-ai/onto#> .
@prefix pp: <http://purl.org/net/p-plan#> .
@prefix beam: <http://w3id.org/beam/core#> .
@prefix dct: <http://purl.org/dc/terms/> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .

########################################################################
# System / Platform
########################################################################

:MastraSystem rdf:type :Team ;
    dct:title "Mastra runtime (example configuration)" ;
    dct:description "Represents the Mastra runtime created by `new Mastra({ agents: { agent }, logger: new PinoLogger(...) })` in code. The system coordinates agents and contains system-level configuration for the logger." ;
    :hasAgentMember :ExampleAgent ;
    :hasSystemConfig :LoggerNameConfig ,
                     :LoggerLevelConfig .

:LoggerNameConfig rdf:type :Config ;
    :configKey "logger.name" ;
    :configValue "Mastra" ;
    dct:description "Logger name configured in PinoLogger({ name: 'Mastra' })." .

:LoggerLevelConfig rdf:type :Config ;
    :configKey "logger.level" ;
    :configValue "info" ;
    dct:description "Logger level configured in PinoLogger({ level: 'info' })." .

########################################################################
# Agent, Model, Memory, and Configuration
########################################################################

:ExampleAgent rdf:type :LLMAgent ;
    dct:title "Example Agent" ;
    :agentID "example-agent" ;
    :agentRole "assistant" ;
    :hasAgentConfig :FireworksAPIConfig ;
    :agentPrompt :AgentSystemPrompt ;
    :hasKnowledge :ExampleAgentMemory ;
    :useLanguageModel :DeepseekR1Model ;
    dct:description "Agent instance created with new Agent({ id: 'example-agent', name: 'Example Agent', model: fireworks('accounts/fireworks/models/deepseek-r1'), instructions: 'You are a helpful and intelligent AI agent.', memory: new Memory() })." .

:AgentSystemPrompt rdf:type :Prompt ;
    :promptInstruction "You are a helpful and intelligent AI agent." ;
    :promptContext "System-level instruction (agent 'instructions' argument)" ;
    dct:description "System/agent-level prompt (instructions) provided when the agent is instantiated in code." .

:ExampleAgentMemory rdf:type :Memory ;
    dct:title "Agent in-memory memory" ;
    dct:description "Memory instance created by new Memory() and assigned to the agent. Used to store short-term or session state. Implementation details omitted; represented as a KnowledgeBase/Memory individual." .

:DeepseekR1Model rdf:type :LanguageModel ;
    dct:title "accounts/fireworks/models/deepseek-r1" ;
    dct:description "Language model referenced by the agent via fireworks(`accounts/fireworks/models/deepseek-r1`). This is a Fireworks-hosted model identifier (the code requires FIREWORKS_API_KEY to access the API)." .

:FireworksAPIConfig rdf:type :Config ;
    :configKey "FIREWORKS_API_KEY" ;
    :configValue "REQUIRED (must be set as environment variable for runtime: process.env.FIREWORKS_API_KEY)" ;
    dct:description "Configuration requirement checked at agent initialization (code throws if FIREWORKS_API_KEY is not set). This is represented as a config item indicating a required credential (value not included here)." .

########################################################################
# Chat Interaction - Task Template, Prompts and Resources
########################################################################

:ChatInteractionTask rdf:type :Task ;
    dct:title "Interactive chat user query (task template)" ;
    dct:description "Template representing an interactive chat turn processed in the main loop (in chat.ts). For each user input, the code calls agent.stream(answer, { threadId, resourceId }) and consumes the returned textStream. The streaming output is masked and decorated for display (think tags and spinner). This Task is performed by the ExampleAgent and consumes a UserInput resource and produces a TextResponse resource." ;
    :performedByAgent :ExampleAgent ;
    :requiresResource :UserInputResource ;
    :producedResource :TextResponseResource ;
    :taskPrompt :UserQueryPrompt ;
    :hasConfig :SessionThreadConfig ,
               :SessionResourceIdConfig .

:UserQueryPrompt rdf:type :Prompt ;
    :promptInstruction "User-provided input string sent at runtime (example user history entry: \"What's the meaning of life?\")" ;
    :promptInputData "Dynamic user input captured from stdin. In the example code, Readline history includes: \"What's the meaning of life?\"." ;
    :promptContext "Task-level prompt representing the end-user query passed into agent.stream(answer, { threadId, resourceId })." ;
    dct:description "Task-level prompt capturing the user's question/instruction." .

:UserInputResource rdf:type beam:Resource ;
    dct:title "User input (stdin)" ;
    dct:description "The raw user input string read from stdin and provided to the agent as the `answer` parameter in agent.stream(answer, { threadId, resourceId }). Example content: \"What's the meaning of life?\"." .

:TextResponseResource rdf:type beam:Resource ;
    dct:title "Agent text response (streamed)" ;
    dct:description "Text response produced by the agent through agent.stream. The code receives a streaming text iterator (textStream) and applies maskStreamTags(textStream, 'think', ...) to handle 'think' tags and update UI spinner. The final output is printed to stdout. Streaming semantics (chunks, think masks) are modeled as descriptive text." .

:SessionThreadConfig rdf:type :Config ;
    :configKey "threadId" ;
    :configValue "crypto.randomUUID() per process start; represented as a generated UUID string in runtime (threadId variable in chat.ts)" ;
    dct:description "Session thread identifier created at process start and passed to agent.stream for each interaction. The actual runtime UUID generation is described as a literal." .

:SessionResourceIdConfig rdf:type :Config ;
    :configKey "resourceId" ;
    :configValue "SOME_USER_ID" ;
    dct:description "Static resourceId used in the example code (const resourceId = 'SOME_USER_ID'). This value is passed to agent.stream as the resource context for the interaction." .

########################################################################
# Relationships / Participation
########################################################################

# Indicate that the ExampleAgent participates in the ChatInteractionTask (prov:Agent participation modeled via beam:participatedIn)
:ExampleAgent beam:participatedIn :ChatInteractionTask .

########################################################################
# Additional descriptive items (implementation notes)
########################################################################

:StreamMaskingNote rdf:type :Constraint ;
    dct:title "Stream masking and UI decoration (implementation note)" ;
    dct:description "The source code uses maskStreamTags(textStream, 'think', { onStart, onMask, onEnd }) to treat 'think' annotation tags within the stream, updating a spinner (ora) and coloring (gradient). These are runtime/UI behaviors and are represented as descriptive metadata attached to the TextResponseResource and Task, not as executable components." .

:ReadlineNote rdf:type :Constraint ;
    dct:title "Interactive input loop (implementation note)" ;
    dct:description "The main loop reads stdin via Readline, prompts the user, and sends inputs to agent.stream. The event-loop and readline implementation are presented as descriptive context for the ChatInteractionTask." .

########################################################################
# End of instance data
########################################################################