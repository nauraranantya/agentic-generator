# Execution time: 100.38 seconds
# Model used: gpt-5-mini

# Issues / Assumptions:
# - Missing explicit classes for "AgentNetwork", "API Endpoint / Route", and "RequestContext". These were modeled using existing classes:
#   - AgentNetwork -> WorkflowPattern (and a WorkflowStep + Task) to represent the network's supervisory instruction & behavior.
#   - API registration route (/copilotkit) -> Task with associated Configs to represent route metadata and setContext defaults.
#   - RequestContext mapping (setContext) -> modeled as Config key/value pairs attached to the Task that represents the route.
# - Missing a storage/backend class (e.g., LibSQLStore). Modeled storage resources as beam:Instance (beam:Instance is a subclass of beam:Resource).
# - Missing an "Agent instructions" property; used Prompt (agentPrompt) to store agent instructions and other textual instructions.
# - UI components and labels (CopilotChat, UI labels) do not have dedicated classes/properties in the ontology; they were modeled via Prompt instances and promptContext/promptInstruction literals.
# - Some configuration key/value pairings are represented as separate :Config individuals since the ontology provides only configKey/configValue string properties (no structured key/value object).
# - Assumed it is acceptable to attach prompts to agents using :agentPrompt and to tasks using :taskPrompt. Where no direct property existed (e.g., for networks), the network prompt is attached to a Task that represents the supervisory activity.
# - No code-level constructs (types, imports, React components, SDK functions, or language-specific details) were modeledâ€”only semantic concepts (agents, memory, models, prompts, routes, configs, network behavior).
#
# If stricter domain classes (AgentNetwork, Route, StorageBackend, RequestContext) are desired, the ontology would need those additions. The current mapping attempts to maximize fidelity with the available schema.

@prefix : <http://www.w3id.org/agentic-ai/onto#> .
@prefix pp: <http://purl.org/net/p-plan#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix xml: <http://www.w3.org/XML/1998/namespace> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix beam: <http://w3id.org/beam/core#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .

#################################################################
# Individuals describing the agentic solution (Mastra + Weather Agent)
#################################################################

### Mastra system as a Team (container for agents, workflow pattern, system config)
:mastraSystemTeam a :Team ;
    dcterms:title "Mastra System" ;
    rdfs:label "Mastra System" ;
    :hasAgentMember :weatherAgent ;
    :hasSystemConfig :mastraSystemConfig_storage ,
                     :mastraSystemConfig_server_cors_origin ,
                     :mastraSystemConfig_server_cors_allowMethods ,
                     :mastraSystemConfig_server_cors_allowHeaders ;
    :hasWorkflowPattern :myNetworkPattern .

### Mastra top-level storage resource (root Mastra store)
:mastraStorage a beam:Instance ;
    dcterms:title "agui-storage (Mastra root)" ;
    dcterms:description "Top-level Mastra storage created in src/mastra/index.ts. Uses LibSQLStore with id 'agui-storage' and url ':memory:' by default." ;
    dcterms:reference ":memory:" .

### System Config items (one Config individual per key/value)
:mastraSystemConfig_storage a :Config ;
    :configKey "storage.id" ;
    :configValue "agui-storage" .

:mastraSystemConfig_server_cors_origin a :Config ;
    :configKey "server.cors.origin" ;
    :configValue "*" .

:mastraSystemConfig_server_cors_allowMethods a :Config ;
    :configKey "server.cors.allowMethods" ;
    :configValue "[\"*\"]" .

:mastraSystemConfig_server_cors_allowHeaders a :Config ;
    :configKey "server.cors.allowHeaders" ;
    :configValue "[\"*\"]" .

#################################################################
# Weather Agent (LLMAgent) and its artifacts
#################################################################

### Language model used by agent and by the network
:gpt4oModel a :LanguageModel ;
    dcterms:title "openai:gpt-4o" ;
    dcterms:description "Language model instance referenced as openai('gpt-4o') in the code. Used by the weather agent and the AgentNetwork." .

### Weather agent individual
:weatherAgent a :LLMAgent ;
    dcterms:title "Weather Agent" ;
    rdfs:label "Weather Agent" ;
    :agentID "weather-agent" ;
    :agentRole "weather assistant" ;
    :agentPrompt :weatherAgentInstructionPrompt ;
    :hasAgentConfig :weatherAgent_config_model ,
                    :weatherAgent_config_memory_storage ;
    :hasKnowledge :weatherMemory ;
    :useLanguageModel :gpt4oModel ;
    :agentResourceUsage :agentStorage ;
    :hasPrompt :copilotChatPrompt .

### Weather agent instruction prompt (the agent's core instructions)
:weatherAgentInstructionPrompt a :Prompt ;
    dcterms:title "Weather Agent Instructions" ;
    :promptInstruction """
      You are a helpful weather assistant that provides accurate weather information.

      Your primary function is to help users get weather details for specific locations. When responding:
      - Always ask for a location if none is provided
      - If the location name isn't in English, please translate it
      - If giving a location with multiple parts (e.g. "New York, NY"), use the most relevant part (e.g. "New York")
      - Include relevant details like humidity, wind conditions, and precipitation
      - Keep responses concise but informative
    """ .

### Agent-level config: model reference
:weatherAgent_config_model a :Config ;
    :configKey "model" ;
    :configValue "openai:gpt-4o" .

### Agent-level config: memory storage reference (points to the storage used by the agent's Memory)
:weatherAgent_config_memory_storage a :Config ;
    :configKey "memory.storage.id" ;
    :configValue "agui-storage (agent)" .

### Agent memory (Memory instance used by the Weather Agent)
:weatherMemory a :Memory ;
    dcterms:title "Weather Agent Memory" ;
    dcterms:description "Memory instance created for the weather agent. Configured with lastMessages=10, semanticRecall=false, threads.generateTitle=false. Uses a LibSQLStore storage (file:../mastra.db) as defined in agent setup." ;
    :hasConfig :memConfig_lastMessages ,
               :memConfig_semanticRecall ,
               :memConfig_threads_generateTitle ,
               :memConfig_storage_url .

:memConfig_lastMessages a :Config ;
    :configKey "lastMessages" ;
    :configValue "10" .

:memConfig_semanticRecall a :Config ;
    :configKey "semanticRecall" ;
    :configValue "false" .

:memConfig_threads_generateTitle a :Config ;
    :configKey "threads.generateTitle" ;
    :configValue "false" .

:memConfig_storage_url a :Config ;
    :configKey "storage.url" ;
    :configValue "file:../mastra.db" .

### Agent storage resource for memory (agent-level LibSQL store)
:agentStorage a beam:Instance ;
    dcterms:title "agui-storage (agent)" ;
    dcterms:description "LibSQLStore used by the Weather Agent's Memory. Path in code: 'file:../mastra.db' (relative to .mastra/output directory)." ;
    dcterms:reference "file:../mastra.db" .

# Link Mastra team to the specific storage resource used at agent-level (note: agentResourceUsage domain is LLMAgent)
:weatherAgent :agentResourceUsage :agentStorage .

#################################################################
# Network (myNetwork) represented as a WorkflowPattern + Step + Task
# (AgentNetwork modeled as a WorkflowPattern; supervisory task represented as a Task)
#################################################################

:myNetworkPattern a :WorkflowPattern ;
    dcterms:title "myNetwork" ;
    rdfs:label "myNetwork" ;
    rdfs:comment "Agent network named 'myNetwork' which contains the weather agent and uses gpt-4o. The network's top-level instructions are represented as a Task with a Prompt." ;
    :hasWorkflowStep :myNetworkStep .

:myNetworkStep a :WorkflowStep ;
    rdfs:label "myNetwork Step 1" ;
    :stepOrder 1 ;
    :hasAssociatedTask :networkSupervisorTask .

:networkSupervisorTask a :Task ;
    dcterms:title "Network Supervisor Task" ;
    rdfs:label "Network Supervisor Task" ;
    :taskPrompt :networkSupervisorPrompt ;
    :performedByAgent :weatherAgent ;
    :hasConfig :networkConfig_model ,
                :networkConfig_agentsList .

:networkSupervisorPrompt a :Prompt ;
    dcterms:title "myNetwork Instructions" ;
    :promptInstruction "You are a helpful supervisor agent that can help users with a variety of tasks." ;
    :promptContext "Defined in src/mastra/network/index.ts as the instructions for the AgentNetwork named 'myNetwork'." .

:networkConfig_model a :Config ;
    :configKey "network.model" ;
    :configValue "openai:gpt-4o" .

:networkConfig_agentsList a :Config ;
    :configKey "network.agents" ;
    :configValue "[\"weather-agent\"]" .

#################################################################
# CopilotKit registration route represented as a Task + Configs
# (registerCopilotKit added an API route at /copilotkit that maps to the weatherAgent)
#################################################################

:copilotkitRegistrationTask a :Task ;
    dcterms:title "CopilotKit Registration Route" ;
    rdfs:label "CopilotKit /copilotkit" ;
    rdfs:comment "Represents the API route registered via registerCopilotKit in Mastra server configuration. Contains route metadata and default RequestContext mappings." ;
    :hasConfig :copilot_config_path ,
               :copilot_config_resourceId ,
               :copilot_config_context_userid_default ,
               :copilot_config_context_temperature_scale_default ,
               :copilot_config_context_location_default .

:copilot_config_path a :Config ;
    :configKey "route.path" ;
    :configValue "/copilotkit" .

:copilot_config_resourceId a :Config ;
    :configKey "route.resourceId" ;
    :configValue "weatherAgent" .

:copilot_config_context_userid_default a :Config ;
    :configKey "setContext.user-id.default" ;
    :configValue "anonymous" .

:copilot_config_context_temperature_scale_default a :Config ;
    :configKey "setContext.temperature-scale.default" ;
    :configValue "celsius" .

:copilot_config_context_location_default a :Config ;
    :configKey "setContext.location.default" ;
    :configValue "unknown" .

#################################################################
# CopilotChat UI instructions and labels (stored as Prompts attached to the agent)
#################################################################

:copilotChatPrompt a :Prompt ;
    dcterms:title "CopilotChat UI Instructions" ;
    :promptInstruction "You are assisting the user as best as you can. Answer in the best way possible given the data you have." ;
    :promptContext """
      UI labels passed to the CopilotChat component:
      { "title": "Your Assistant", "initial": "Hi! ðŸ‘‹ How can I assist you today?" }
    """ ;
    :promptOutputIndicator "User-facing chat initial message and UI label configuration." .

#################################################################
# Additional auxiliary items
#################################################################

### Representing that the Mastra Team "operates" the workflow pattern (system-level)
:mastraSystemTeam :hasWorkflowPattern :myNetworkPattern .

### Relate the workflow/network pattern to the agent (explicit hasTeamGoal / hasGoal not used; this is structural)
:myNetworkPattern rdfs:comment "Pattern ties the agent (weatherAgent) into the network 'myNetwork' and indicates the supervisory instructions and tasks to run." .

#################################################################
# End of model
#################################################################