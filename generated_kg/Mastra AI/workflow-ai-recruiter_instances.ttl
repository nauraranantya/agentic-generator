# Execution time: 77.45 seconds
# Model used: gpt-5-mini

# Issues / Assumptions:
# - Conditional branching (when: { 'gatherCandidateInfo.isTechnical': true/false }) and boolean expression semantics cannot be represented directly by the current ontology. Conditions are encoded as literal descriptions on WorkflowStep individuals.
# - Input/output schemas (Zod schemas) and typed step I/O mappings are not first-class elements in the ontology. They are preserved as structured literals in dcterms:description on Task individuals.
# - The concept of a workflow run, runtime execution constructs (Mastra instance, Run, start, createRun, runId), and SDK-specific constructs are framework/runtime details and are not modeled as classes/properties in the ontology. Example runtime values are preserved as literals in descriptions.
# - There is no dedicated property to link a WorkflowPattern to its trigger resource/schema; trigger schema is included as a literal on the WorkflowPattern.
# - Agent "instructions" (persona) and per-task prompt templates are represented as Prompt individuals; dynamic template substitutions (e.g., ${resumeText}) are preserved verbatim in promptInstruction literals.
# - No new classes or properties were created. Where the ontology lacks a direct modeling construct, preserved information is encoded in description strings (dcterms:description) or in Prompt individuals.
# - Example input value used in the code ("Simulated resume content...") is recorded as an example literal, not as executable data.

@prefix : <http://www.w3id.org/agentic-ai/onto#> .
@prefix pp: <http://purl.org/net/p-plan#> .
@prefix beam: <http://w3id.org/beam/core#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

#####################################
# Agent (LLM Agent) and configuration
#####################################

:recruiterAgent rdf:type :LLMAgent ;
    :agentID "recruiter-agent" ;
    :agentRole "Recruiter Agent" ;
    :agentPrompt :prompt_recruiter_instructions ;
    :useLanguageModel :lm_gpt4o_mini ;
    :hasAgentConfig :config_recruiterAgent ;
    rdfs:label "Recruiter Agent" ;
    dcterms:description "An LLM-based agent representing a recruiter. Uses a language model to generate structured outputs and short questions for candidates based on resume text." .

:prompt_recruiter_instructions rdf:type :Prompt ;
    :promptInstruction "You are a recruiter." ;
    :promptContext "Agent-level static instruction used as the recruiter's persona/instruction set for generation." ;
    dcterms:description "Agent persona/instruction used as a base prompt for all generation by the recruiter agent." .

:lm_gpt4o_mini rdf:type :LanguageModel ;
    dcterms:title "gpt-4o-mini" ;
    dcterms:description "Language model referenced in the implementation (openai('gpt-4o-mini')). Represented as a LanguageModel resource." .

:config_recruiterAgent rdf:type :Config ;
    :configKey "model" ;
    :configValue "gpt-4o-mini" ;
    dcterms:description "Agent configuration capturing the selected language model identifier." .

#########################
# Resources (inputs/outputs)
#########################

:res_resumeText rdf:type beam:Instance ;
    dcterms:title "resumeText (trigger input)" ;
    dcterms:description "Trigger input resource representing the resume text provided to the workflow. Example value used in code run: 'Simulated resume content...'" .

:res_candidateInfo rdf:type beam:Instance ;
    dcterms:title "candidateInfo (gatherCandidateInfo output)" ;
    dcterms:description """Structured output produced by gatherCandidateInfo task.
Fields:
- candidateName: string
- isTechnical: boolean
- specialty: string
- resumeText: string
This instance represents the structured candidate information produced by the task.
""" .

:res_question_specialty rdf:type beam:Instance ;
    dcterms:title "question_about_specialty" ;
    dcterms:description "A short question generated by askAboutSpecialty task (output schema: { question: string })." .

:res_question_role rdf:type beam:Instance ;
    dcterms:title "question_about_role" ;
    dcterms:description "A short question generated by askAboutRole task (output schema: { question: string })." .

################
# Tasks & Prompts
################

:task_gatherCandidateInfo rdf:type :Task ;
    rdfs:label "gatherCandidateInfo" ;
    :taskPrompt :prompt_gatherCandidateInfo ;
    :requiresResource :res_resumeText ;
    :producedResource :res_candidateInfo ;
    :performedByAgent :recruiterAgent ;
    dcterms:description """Input schema (Zod): { resumeText: string }
Output schema (Zod): {
  candidateName: string,
  isTechnical: boolean,
  specialty: string,
  resumeText: string
}
Execution summary:
- Reads 'resumeText' from the workflow trigger context (context.getStepResult('trigger')?.resumeText).
- Constructs the prompt template below, substitutes resumeText, and sends it to the recruiter agent.
- Expects the agent output to be parsed into the defined output schema.
Prompt template (literal):
  You are given this resume text:
  "${resumeText}"
The task uses the recruiter agent's generation functionality (with an explicit output schema in the implementation) to produce structured candidate information.
""" .

:prompt_gatherCandidateInfo rdf:type :Prompt ;
    :promptInstruction "You are given this resume text:\n\"${resumeText}\"" ;
    :promptContext "Template used to extract structured candidate information from free-form resume text." ;
    dcterms:description "Prompt template for extracting candidate fields (candidateName, isTechnical, specialty, resumeText)." .

:task_askAboutSpecialty rdf:type :Task ;
    rdfs:label "askAboutSpecialty" ;
    :taskPrompt :prompt_askAboutSpecialty ;
    :requiresResource :res_candidateInfo ;
    :producedResource :res_question_specialty ;
    :performedByAgent :recruiterAgent ;
    dcterms:description """Output schema (Zod): { question: string }
Execution summary:
- Reads candidateInfo produced by gatherCandidateInfo (candidateName, specialty, resumeText).
- Generates a short, targeted question about how the candidate got into their specialty.
Prompt template (literal):
  You are a recruiter. Given the resume below, craft a short question
  for ${candidateName} about how they got into "${specialty}".
  Resume: ${resumeText}
The generated text is trimmed and returned as the 'question' field.
""" .

:prompt_askAboutSpecialty rdf:type :Prompt ;
    :promptInstruction "You are a recruiter. Given the resume below, craft a short question for ${candidateName} about how they got into \"${specialty}\". Resume: ${resumeText}" ;
    :promptContext "Generates a single short question focused on the candidate's specialty." ;
    dcterms:description "Task-level prompt referencing candidateInfo fields for dynamic substitution." .

:task_askAboutRole rdf:type :Task ;
    rdfs:label "askAboutRole" ;
    :taskPrompt :prompt_askAboutRole ;
    :requiresResource :res_candidateInfo ;
    :producedResource :res_question_role ;
    :performedByAgent :recruiterAgent ;
    dcterms:description """Output schema (Zod): { question: string }
Execution summary:
- Reads candidateInfo produced by gatherCandidateInfo (candidateName, resumeText).
- Generates a short question asking what interests the candidate most about the role.
Prompt template (literal):
  You are a recruiter. Given the resume below, craft a short question
  for ${candidateName} asking what interests them most about this role.
  Resume: ${resumeText}
The generated text is trimmed and returned as the 'question' field.
""" .

:prompt_askAboutRole rdf:type :Prompt ;
    :promptInstruction "You are a recruiter. Given the resume below, craft a short question for ${candidateName} asking what interests them most about this role. Resume: ${resumeText}" ;
    :promptContext "Generates a single short question focused on candidate interest in the role." ;
    dcterms:description "Task-level prompt referencing candidateInfo fields for dynamic substitution." .

####################
# Workflow & Steps
####################

:candidateWorkflow rdf:type :WorkflowPattern ;
    rdfs:label "candidate-workflow" ;
    dcterms:title "candidate-workflow" ;
    dcterms:description """Workflow triggered by a single trigger value 'resumeText'.
Trigger schema (Zod): { resumeText: string }
Behavior summary:
- Step 1 (gatherCandidateInfo) extracts structured candidate information from the trigger resumeText.
- Conditional branching:
    - If gatherCandidateInfo.isTechnical == true then execute askAboutSpecialty.
    - If gatherCandidateInfo.isTechnical == false then execute askAboutRole.
The implementation example commits the workflow and demonstrates one run with triggerData: { resumeText: 'Simulated resume content...' }.
""" ;
    :hasWorkflowStep :ws_gatherCandidateInfo , :ws_askAboutSpecialty , :ws_askAboutRole .

:ws_gatherCandidateInfo rdf:type :WorkflowStep ;
    rdfs:label "gatherCandidateInfo step" ;
    :hasAssociatedTask :task_gatherCandidateInfo ;
    :stepOrder "1"^^xsd:integer ;
    dcterms:description "Initial workflow step that extracts candidate information from the trigger resumeText." ;
    :nextStep :ws_askAboutSpecialty , :ws_askAboutRole .

:ws_askAboutSpecialty rdf:type :WorkflowStep ;
    rdfs:label "askAboutSpecialty step" ;
    :hasAssociatedTask :task_askAboutSpecialty ;
    :stepOrder "2"^^xsd:integer ;
    dcterms:description "Conditional step executed when gatherCandidateInfo.isTechnical == true. Condition encoded here because ontology lacks a dedicated condition construct." .

:ws_askAboutRole rdf:type :WorkflowStep ;
    rdfs:label "askAboutRole step" ;
    :hasAssociatedTask :task_askAboutRole ;
    :stepOrder "3"^^xsd:integer ;
    dcterms:description "Conditional step executed when gatherCandidateInfo.isTechnical == false. Condition encoded here because ontology lacks a dedicated condition construct." .

####
# Notes
####
# - All task prompts, input/output schemas, branching logic, and example runtime input values are preserved as literals (promptInstruction, dcterms:description) so another system or LLM can reconstruct the workflow and tasks logically.
# - No framework-specific methods, SDK calls, code structures, or UI components are included; only the semantic definitions, prompts, schemas, and control-flow conditions (as textual descriptions) are represented.