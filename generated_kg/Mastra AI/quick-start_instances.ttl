# Execution time: 80.71 seconds
# Model used: gpt-5-mini

# Issues / Assumptions:
# - The ontology lacks a dedicated class or property to represent data/schema objects (e.g., Zod schemas, JSON schemas, or input/output type definitions). I modelled schemas and type information as literal descriptions using dcterms:description and Prompt properties (promptInputData / promptOutputIndicator). A dedicated Schema class and properties (e.g., hasInputSchema, hasOutputSchema) would be clearer.
# - Runtime constructs (workflow run instances, function callbacks, SDK-specific calls like createRun()/start()) are not represented by specific classes/properties in the ontology. I captured their semantics via descriptive literals on workflow and step individuals. If required, we would need classes for WorkflowRun and RunTrigger.
# - The ontology does not have an explicit class to represent logger instances or console logging as an executable runtime tool. I modelled the logger/console as a Tool with configuration stored in Config. A more explicit "ExecutionEnvironment" or "RuntimeTool" class would be useful.
# - Zod schemas and exact code-level types (e.g., TypeScript types) cannot be represented directly. I preserved them as literal strings in descriptions and prompt properties.
# - The "legacy_workflows" mapping in the source was preserved as descriptive metadata on the system but not modelled as a separate WorkflowPattern instance because ontology supports multiple patterns; the legacy workflow is included as an additional WorkflowPattern individual but no runtime mapping semantics are modelled.
# - No new classes or properties were added to the ontology; all modeling uses existing classes/properties only.

@prefix : <http://www.w3id.org/agentic-ai/onto#> .
@prefix pp: <http://purl.org/net/p-plan#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix xml: <http://www.w3.org/XML/1998/namespace> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix beam: <http://w3id.org/beam/core#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@base <http://www.w3id.org/agentic-ai/onto#> .

#################################################################
# System / Team
#################################################################

:mastraSystem rdf:type :Team ;
    dcterms:title "Mastra" ;
    dcterms:description "Agent orchestration system instance containing agents, workflows and logger configuration as defined in the source repository." ;
    :hasAgentMember :catOne ;
    :hasWorkflowPattern :logCatWorkflowPattern , :legacy_logCatWorkflowPattern ;
    :hasSystemConfig :mastraSystemConfig .

:mastraSystemConfig rdf:type :Config ;
    :configKey "logger.name" ;
    :configValue "Mastra" ;
    :configKey "logger.level" ;
    :configValue "debug" ;
    dcterms:description "System-level configuration corresponding to PinoLogger name and level from the Mastra instantiation." .

#################################################################
# Agent (LLMAgent)
#################################################################

:catOne rdf:type :LLMAgent ;
    dcterms:title "Cat One" ;
    :agentID "cat-one" ;
    :agentRole "feline expert" ;
    :hasAgentConfig :catOneConfig ;
    :hasAgentCapability :capability_felineExpert ;
    :agentPrompt :catOne_agentPrompt ;
    :useLanguageModel :lm_gpt4o ;
    :agentResourceUsage :lm_gpt4o ;
    dcterms:description "An LLM-based agent configured as a feline expert. The agent uses a language model identifier 'gpt-4o' and contains instructions to produce succinct species names when asked." .

:catOneConfig rdf:type :Config ;
    :configKey "model" ;
    :configValue "gpt-4o" ;
    dcterms:description "Agent configuration indicating which language model to use." .

:capability_felineExpert rdf:type :Capability ;
    dcterms:title "Feline expertise" ;
    dcterms:description "Ability to answer questions about cat species, their behavior, biology and taxonomy." .

:catOne_agentPrompt rdf:type :Prompt ;
    dcterms:title "Cat One instructions (agent prompt)" ;
    :promptInstruction "You are a feline expert with comprehensive knowledge of all cat species, from domestic breeds to wild big cats. As a lifelong cat specialist, you understand their behavior, biology, social structures, and evolutionary history in great depth. If you are asked for a specie name, do not return a paragraph, a succinct two or three letter name of the species will suffice." ;
    :promptContext "Default agent-level instructions to guide behavior when the agent is asked about cat species. This prompt is intended to be used by the agent as its core persona/instructions." ;
    dcterms:description "Agent-level instructions (kept verbatim from source). Note: the instruction requests very short species responses when asked for a species name." .

#################################################################
# Language Model (Resource / Model)
#################################################################

:lm_gpt4o rdf:type :LanguageModel , beam:StatisticalModel ;
    dcterms:title "gpt-4o" ;
    dcterms:description "Language model referenced by the agent configuration (identifier 'gpt-4o'). Treated as a model resource used by the agent." .

#################################################################
# Tasks and Prompts
#################################################################

:task_generateMostPopularSpecies rdf:type :Task ;
    dcterms:title "Generate most popular cat species" ;
    dcterms:description "Task where the agent is asked 'What is the most popular cat species?' and expected to return a JSON object matching the output schema { species: string }." ;
    :taskPrompt :prompt_generateMostPopularSpecies ;
    :performedByAgent :catOne ;
    :producedResource :resource_speciesNameJSON ;
    :requiresCapability :capability_felineExpert .

:prompt_generateMostPopularSpecies rdf:type :Prompt ;
    dcterms:title "Question prompt: most popular cat species" ;
    :promptInstruction "What is the most popular cat species?" ;
    :promptInputData "At runtime the code passes this prompt to the agent along with an output schema expecting an object containing a 'species' string (Zod schema: const specieSchema = z.object({ species: z.string() }) )." ;
    :promptOutputIndicator "Expect output as a JSON object matching { species: string } ‚Äî e.g., { \"species\": \"Maine Coon\" }" ;
    dcterms:description "Prompt used in the call agent.generate('What is the most popular cat species?', { output: specieSchema }) from the code. Schema is preserved as a literal." .

:resource_speciesNameJSON rdf:type beam:Instance ;
    dcterms:title "Species name (JSON object)" ;
    dcterms:description "Output produced by the agent for the generateMostPopularSpecies task. Expected shape: { \"species\": string } (the source's Zod schema). Example: { \"species\": \"Maine Coon\" }" .

#################################################################
# Workflow Pattern and Steps
#################################################################

:logCatWorkflowPattern rdf:type :WorkflowPattern ;
    dcterms:title "log-cat-workflow" ;
    dcterms:description "Workflow that accepts an input { name: string } and runs a step to log the cat name, returning rawText. This corresponds to createWorkflow with id 'log-cat-workflow' in the source." ;
    :hasWorkflowStep :logCatNameStep .

:legacy_logCatWorkflowPattern rdf:type :WorkflowPattern ;
    dcterms:title "legacy_catWorkflow (legacy mapping)" ;
    dcterms:description "Legacy workflow mapping preserved from repository (legacy_workflows.legacy_catWorkflow). Semantic mapping preserved but implementation differences are not represented." .

:logCatNameStep rdf:type :WorkflowStep ;
    dcterms:title "logCatName" ;
    :stepOrder 1 ;
    :hasAssociatedTask :task_logCatName ;
    dcterms:description "Workflow step that logs the 'name' input to console and returns rawText. The step expects inputSchema: { name: string } and produces outputSchema: { rawText: string }." .

:task_logCatName rdf:type :Task ;
    dcterms:title "Log cat name task" ;
    dcterms:description "Task that takes { name: string } as input, performs logging 'Hello, <name> üêà' and returns { rawText: string } containing the greeting. Implemented in source as createStep with id 'logCatName' and executed by the workflow runtime/console." ;
    :performedBy :consoleTool ;
    :producedResource :resource_rawText ;
    :requiresResource :consoleToolResource .

:consoleTool rdf:type :Tool ;
    dcterms:title "Console Logger (runtime)" ;
    dcterms:description "Represents the runtime logging facility used by the step (the source prints to console via console.log). Modeled as a Tool to indicate the step uses an execution tool." ;
    :hasToolConfig :consoleToolConfig .

:consoleToolConfig rdf:type :Config ;
    :configKey "behaviour" ;
    :configValue "print to stdout 'Hello, <name> üêà'" ;
    dcterms:description "Configuration describing the logging behavior for the console tool used in the workflow step." .

:consoleToolResource rdf:type beam:Instance ;
    dcterms:title "Console runtime resource" ;
    dcterms:description "Representation of the console runtime used as a resource during task execution." .

:resource_rawText rdf:type beam:Instance ;
    dcterms:title "rawText" ;
    dcterms:description "Output of logCatName task. Example: 'Hello Fluffy'. Output schema in source: z.object({ rawText: z.string() })." .

#################################################################
# Connections between System, Workflows and Tasks
#################################################################

# Team (Mastra) has the workflow pattern
:mastraSystem :hasWorkflowPattern :logCatWorkflowPattern .

# The workflow step is semantically linked to the task that performs the work
:logCatNameStep :hasAssociatedTask :task_logCatName .

# The generate species task is external to the workflow but invoked from system runtime:
# code flow: agent.generate(...) yields resource_speciesNameJSON, then workflow run start uses that species as input to log-cat-workflow.
:task_generateMostPopularSpecies :producedResource :resource_speciesNameJSON .

#################################################################
# Example runtime semantics (described, not executable)
#################################################################

:runtime_flow_example rdf:type :Context ;
    dcterms:title "Runtime flow (description)" ;
    dcterms:description """
    1) The agent 'Cat One' (cat-one) is configured with an agentPrompt containing detailed feline expert instructions and uses language model 'gpt-4o'.
    2) The code calls the agent with prompt 'What is the most popular cat species?' and an output Zod schema expecting { species: string }.
    3) The agent returns the resource 'resource_speciesNameJSON'.
    4) The runtime creates a workflow run of 'log-cat-workflow' and starts it with triggerData { name: <species> } where <species> is the string returned by the agent, resulting in the logCatNameStep executing and producing rawText (resource_rawText).
    Note: Workflow run and invocation semantics are described in this Context individual; the ontology lacks a specific WorkflowRun class, hence this is represented as descriptive metadata.
    """ .

#################################################################
# Reuse and provenance metadata (descriptive)
#################################################################

:sourceRepository rdf:type :Instance ;
    dcterms:title "Source code (repository snapshot)" ;
    dcterms:description "Semantic description of code artifacts: src/index.ts, src/mastra/index.ts, src/mastra/agents/agent.ts and src/mastra/workflows. The code defines agent config, workflows and steps; these semantics are encoded above as individuals." .

#################################################################
# End of instance data
#################################################################