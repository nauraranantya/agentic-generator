# Execution time: 80.71 seconds
# Model used: gpt-5-mini

# Issues / Assumptions:
# - Missing explicit "Run" / "Execution" class and properties in the ontology to represent an execution instance, its lifecycle (started, success/failed/suspended), and binding of a run to a workflow. I model an example run as a beam:Instance with descriptive literals because no Run class exists.
# - There is no dedicated property to link an Instance (run) to a WorkflowPattern; I include the run as an Instance and describe it in rdfs:comment. A direct property such as "executedWorkflow" would be useful.
# - The ontology does not provide a property to represent input/output schemas explicitly (only Prompt related dataproperties). I use Prompt individuals attached to Tasks and store schemas and algorithmic logic in promptInputData / promptInstruction / promptOutputIndicator strings.
# - The ontology lacks a standard way to represent step-level programmatic dependencies (e.g., the getStepResult call). I represent dependencies using :relatedStep / :nextStep between WorkflowStep individuals and describe the semantics in Prompt and rdfs:comment literals.
# - There is no class/property to represent "example runtime values" other than beam:Resource. I store example input and produced values as beam:Resource instances with descriptive literals.
# - Implementation / framework-specific constructs (e.g., createStep, zod schemas, TypeScript types, SDK calls) are intentionally not modeled; instead I preserved the semantic logic and schema contents as literals.
# - No LLMs are used in the source (this is a code-driven workflow), so :LLMAgent and LM-related properties are not used.

@prefix : <http://www.w3id.org/agentic-ai/onto#> .
@prefix beam: <http://w3id.org/beam/core#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

#################################################################
# Workflow pattern (my-workflow)
#################################################################

:myWorkflowPattern
    rdf:type :WorkflowPattern ;
    rdfs:label "my-workflow" ;
    rdfs:comment "Workflow composed of four sequential steps that transforms an input number to a final boolean (isEven). Mirrors the createWorkflow(...).then(...).then(...).then(...) pipeline." ;
    :hasWorkflowStep :ws_stepOne ,
                     :ws_stepTwo ,
                     :ws_stepThree ,
                     :ws_stepFour .

#################################################################
# Workflow steps and ordering
#################################################################

:ws_stepOne
    rdf:type :WorkflowStep ;
    rdfs:label "stepOne" ;
    :stepOrder 1 ;
    :hasAssociatedTask :task_stepOne ;
    :nextStep :ws_stepTwo .

:ws_stepTwo
    rdf:type :WorkflowStep ;
    rdfs:label "stepTwo" ;
    :stepOrder 2 ;
    :hasAssociatedTask :task_stepTwo ;
    :nextStep :ws_stepThree ;
    :relatedStep :ws_stepOne .

:ws_stepThree
    rdf:type :WorkflowStep ;
    rdfs:label "stepThree" ;
    :stepOrder 3 ;
    :hasAssociatedTask :task_stepThree ;
    :nextStep :ws_stepFour ;
    :relatedStep :ws_stepTwo .

:ws_stepFour
    rdf:type :WorkflowStep ;
    rdfs:label "stepFour" ;
    :stepOrder 4 ;
    :hasAssociatedTask :task_stepFour ;
    :relatedStep :ws_stepThree .

#################################################################
# Tool and capability (runtime)
#################################################################

:mastraTool
    rdf:type :Tool ;
    rdfs:label "Mastra Runtime Tool" ;
    rdfs:comment "Represents the Mastra runtime that executes workflow steps, performs validation of input/output schemas, and manages step execution." ;
    :hasCapability :cap_executeStep .

:cap_executeStep
    rdf:type :Capability ;
    rdfs:label "execute workflow step" ;
    rdfs:comment "Capability to execute a step function, enforce input/output schema constraints, access prior step results (getStepResult), and produce the specified resources." .

#################################################################
# Resources (inputs and outputs)
#################################################################

:res_inputData
    rdf:type beam:Resource ;
    rdfs:label "workflow inputData (example)" ;
    rdfs:comment """Example inputData passed to a workflow run.
JSON example: { "inputValue": 12 }""" .

:res_doubledValue
    rdf:type beam:Resource ;
    rdfs:label "doubledValue" ;
    rdfs:comment "Numeric resource produced by stepOne equal to inputValue * 2." .

:res_isOriginalOdd
    rdf:type beam:Resource ;
    rdfs:label "isOriginalOdd" ;
    rdfs:comment "Boolean resource produced by stepOne indicating whether the original inputValue was odd (true/false)." .

:res_incrementedValue
    rdf:type beam:Resource ;
    rdfs:label "incrementedValue" ;
    rdfs:comment "Numeric resource produced by stepTwo. Equals doubledValue + 1 if isOriginalOdd is true, otherwise equals doubledValue." .

:res_tripledValue
    rdf:type beam:Resource ;
    rdfs:label "tripledValue" ;
    rdfs:comment "Numeric resource produced by stepThree: incrementedValue * 3." .

:res_isEven
    rdf:type beam:Resource ;
    rdfs:label "isEven" ;
    rdfs:comment "Boolean final output produced by stepFour: true if tripledValue is even, false otherwise." .

#################################################################
# Tasks with prompts describing schemas and algorithmic behavior
#################################################################

:task_stepOne
    rdf:type :Task ;
    rdfs:label "task_stepOne" ;
    rdfs:comment "Task that computes doubledValue and isOriginalOdd from the workflow input inputValue." ;
    :performedBy :mastraTool ;
    :requiresResource :res_inputData ;
    :producedResource :res_doubledValue , :res_isOriginalOdd ;
    :taskPrompt :prompt_stepOne .

:prompt_stepOne
    rdf:type :Prompt ;
    :promptInputData "{\"type\": \"object\", \"properties\": { \"inputValue\": { \"type\": \"number\" } }, \"required\": [\"inputValue\"] }" ;
    :promptInstruction """Semantic algorithm (no code): 
- Read inputValue (numeric).
- Compute doubledValue = inputValue * 2.
- Compute isOriginalOdd = true if inputValue modulo 2 equals 1, otherwise false.
- Return an object containing doubledValue (number) and isOriginalOdd (boolean).""" ;
    :promptOutputIndicator "{\"type\": \"object\", \"properties\": { \"doubledValue\": { \"type\": \"number\" }, \"isOriginalOdd\": { \"type\": \"boolean\" } }, \"required\": [\"doubledValue\",\"isOriginalOdd\"] }" .

:task_stepTwo
    rdf:type :Task ;
    rdfs:label "task_stepTwo" ;
    rdfs:comment "Task that conditionally increments doubledValue based on whether the original input was odd." ;
    :performedBy :mastraTool ;
    :requiresResource :res_doubledValue , :res_isOriginalOdd ;
    :producedResource :res_incrementedValue ;
    :taskPrompt :prompt_stepTwo .

:prompt_stepTwo
    rdf:type :Prompt ;
    :promptInputData "{\"type\": \"object\", \"properties\": { \"doubledValue\": { \"type\": \"number\" }, \"isOriginalOdd\": { \"type\": \"boolean\" } }, \"required\": [\"doubledValue\",\"isOriginalOdd\"] }" ;
    :promptInstruction """Semantic algorithm (no code):
- Receive doubledValue (numeric) and isOriginalOdd (boolean).
- If isOriginalOdd is true, set incrementedValue = doubledValue + 1; otherwise set incrementedValue = doubledValue.
- Return an object containing incrementedValue (number).""" ;
    :promptOutputIndicator "{\"type\": \"object\", \"properties\": { \"incrementedValue\": { \"type\": \"number\" } }, \"required\": [\"incrementedValue\"] }" .

:task_stepThree
    rdf:type :Task ;
    rdfs:label "task_stepThree" ;
    rdfs:comment "Task that validates the availability of stepTwo's result and computes tripledValue from incrementedValue." ;
    :performedBy :mastraTool ;
    :requiresResource :res_incrementedValue ;
    :producedResource :res_tripledValue ;
    :taskPrompt :prompt_stepThree .

:prompt_stepThree
    rdf:type :Prompt ;
    :promptInputData "{\"type\": \"object\", \"properties\": { \"incrementedValue\": { \"type\": \"number\" } }, \"required\": [\"incrementedValue\"] }" ;
    :promptInstruction """Semantic algorithm (no code):
- Ensure that stepTwo produced a valid incrementedValue (numeric). If not available or invalid, the step should fail with an explanatory error.
- Compute tripledValue = incrementedValue * 3.
- Return an object containing tripledValue (number).
Note: This step semantically depends on stepTwo; in the implementation getStepResult(stepTwo) is used to access the prior output. The dependency is represented in the workflow as a relatedStep and nextStep (stepTwo -> stepThree).""" ;
    :promptOutputIndicator "{\"type\": \"object\", \"properties\": { \"tripledValue\": { \"type\": \"number\" } }, \"required\": [\"tripledValue\"] }" .

:task_stepFour
    rdf:type :Task ;
    rdfs:label "task_stepFour" ;
    rdfs:comment "Task that validates the availability of stepThree's result and computes the final boolean isEven from tripledValue." ;
    :performedBy :mastraTool ;
    :requiresResource :res_tripledValue ;
    :producedResource :res_isEven ;
    :taskPrompt :prompt_stepFour .

:prompt_stepFour
    rdf:type :Prompt ;
    :promptInputData "{\"type\": \"object\", \"properties\": { \"tripledValue\": { \"type\": \"number\" } }, \"required\": [\"tripledValue\"] }" ;
    :promptInstruction """Semantic algorithm (no code):
- Ensure that stepThree produced a valid tripledValue (numeric). If not available or invalid, the step should fail with an explanatory error.
- Compute isEven = (tripledValue modulo 2 === 0).
- Return an object containing isEven (boolean).
Note: This step semantically depends on stepThree; the implementation accesses prior step results for validation. Represented in the workflow graph via relatedStep and nextStep relations.""" ;
    :promptOutputIndicator "{\"type\": \"object\", \"properties\": { \"isEven\": { \"type\": \"boolean\" } }, \"required\": [\"isEven\"] }" .

#################################################################
# Example run (execution instance) and example input/output
#################################################################

:exampleRun1
    rdf:type beam:Instance ;
    rdfs:label "example-run-1" ;
    rdfs:comment """An example execution of my-workflow showing inputs and the final produced result.
- Input provided: { \"inputValue\": 12 }.
- Execution sequence: stepOne -> stepTwo -> stepThree -> stepFour.
- Expected final output: isEven boolean (true/false).
Note: The ontology lacks a native Run class; this is represented as a beam:Instance with descriptive metadata. The run produced the final resource :res_isEven (see producedResource)." ;
    :producedResource :res_isEven .

#################################################################
# Additional notes mapping code concepts to ontology individuals
#################################################################

# - The top-level Mastra configuration (workflows registration) is represented by :myWorkflowPattern.
# - Each createStep(...) from the source is represented by a WorkflowStep and an associated Task with a Prompt describing schema and algorithm.
# - Schema definitions (zod in code) are captured as JSON schema strings in :promptInputData and :promptOutputIndicator.
# - getStepResult dependency usage is represented semantically by :relatedStep / :nextStep and by describing the dependency in the promptInstruction and task comments.
# - The runtime that executes tasks is modeled as :mastraTool (a :Tool) with :hasCapability :cap_executeStep.
# - Resources produced and required by tasks are modeled as beam:Resource individuals and connected via :requiresResource and :producedResource.
# - No implementation code or SDK-specific constructs are included; only semantic descriptions are preserved.
