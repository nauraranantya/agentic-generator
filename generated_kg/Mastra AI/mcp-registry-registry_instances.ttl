# Execution time: 85.36 seconds
# Model used: gpt-5-mini

# Issues / Assumptions:
# - The source dynamically obtains tools via mcp.listTools(); the exact set of tools returned at runtime is not available in the sources. I modeled the MCP client and one concrete registry tool instance (the registry server started by the configured command) to capture the configuration and intended usage, but the full runtime tool list is unknown.
# - The ontology lacks a dedicated property for executable "command" + "args" or "server definition" as first-class constructs; I modeled those as Config entries (configKey/configValue). This is an approximation consistent with "configuration settings" in the ontology.
# - Runtime and framework-specific behavior (await, asynchronous initialization, SDK-specific objects) cannot be modeled in the ontology and are therefore represented only as descriptive literals (in descriptions/prompts/capabilities).
# - There is no property for "logger level" semantics beyond modeling it as a configuration key/value; I represented the PinoLogger settings using Config individuals.
# - The ontology does not include a property to represent the connection between an Agent and the registry initialization call (mcp.listTools()) except via tool/Capability/Config modeling; I captured the intent by modeling a Capability "listTools" and linking the MCPClient tool and the agent to the discovered tool(s).
# - No changes to classes or properties were made; all information is expressed using existing individuals, properties, and datatypes.

@prefix : <http://www.w3id.org/agentic-ai/onto#> .
@prefix pp: <http://purl.org/net/p-plan#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix xml: <http://www.w3.org/XML/1998/namespace> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix beam: <http://w3id.org/beam/core#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@base <http://www.w3id.org/agentic-ai/onto#> .

#################################################################
# Instances describing the Mastra agent solution
#################################################################

# Mastra system / Team that contains configured agents and system-level config
:mastraSystem a :Team ;
    <http://purl.org/dc/terms/title> "Mastra runtime" ;
    <http://purl.org/dc/terms/description> "Mastra configured with a single MCP Registry Agent and a Pino logger. This Team represents the runtime composition (agents, system configuration)." ;
    :hasAgentMember :mcpRegistryAgent ;
    :hasSystemConfig :mastraLoggerNameConfig ,
                     :mastraLoggerLevelConfig .

:mastraLoggerNameConfig a :Config ;
    :configKey "logger.name" ;
    :configValue "MCP Registry" ;
    <http://purl.org/dc/terms/description> "Pino logger name configured for the Mastra runtime." .

:mastraLoggerLevelConfig a :Config ;
    :configKey "logger.level" ;
    :configValue "info" ;
    <http://purl.org/dc/terms/description> "Pino logger level configured for the Mastra runtime." .

# The LLM-based agent defined in src/mastra/agents/index.ts
:mcpRegistryAgent a :LLMAgent ;
    :agentID "mcp-registry-agent" ;
    :agentRole "registry" ;
    <http://purl.org/dc/terms/title> "MCP Registry Agent" ;
    <http://purl.org/dc/terms/description> "Agent configured to provide information about MCP registries." ;
    :agentPrompt :mcpRegistryAgentPrompt ;
    :useLanguageModel :gpt4oModel ;
    :agentToolUsage :mcpRegistryTool ;
    :hasAgentConfig :mcpRegistryAgentConfig .

# Agent prompt (instructions string preserved exactly)
:mcpRegistryAgentPrompt a :Prompt ;
    :promptInstruction """You are a helpful assistant that provides information about MCP registries. You can search for registries by ID, tag, or name.""" ;
    :promptContext "Agent bootstrap prompt / instruction used to guide agent behavior independent of a specific task." ;
    <http://purl.org/dc/terms/description> "Primary instruction prompt passed to the agent on initialization (from the 'instructions' field in configuration)." .

# Language model used by the agent (openai('gpt-4o'))
:gpt4oModel a :LanguageModel ;
    <http://purl.org/dc/terms/title> "gpt-4o" ;
    <http://purl.org/dc/terms/description> "Language model referenced in code via openai('gpt-4o'). Represented as a StatisticalModel (LanguageModel subclass)." .

# Agent-specific configuration (keeps track of the agent-level config concept)
:mcpRegistryAgentConfig a :Config ;
    :configKey "agent.id" ;
    :configValue "mcp-registry-agent" ;
    <http://purl.org/dc/terms/description> "Agent identifier and basic agent metadata captured as configuration." .

#################################################################
# Tools, client and capabilities (MCP client and configured registry server)
#################################################################

# MCP client abstraction used to enumerate and connect to MCP servers (mcp.listTools())
:mcpClient a :Tool ;
    <http://purl.org/dc/terms/title> "MCP Client" ;
    <http://purl.org/dc/terms/description> "Client used by the Mastra configuration to enumerate available MCP tool endpoints. In the source it is an MCPClient instance with server configuration; provides a listTools() capability." ;
    :hasCapability :mcpClientListToolsCapability ;
    :hasToolConfig :mcpClientRegistryServerCommandConfig ,
                  :mcpClientRegistryServerArgsConfig .

:mcpClientListToolsCapability a :Capability ;
    <http://purl.org/dc/terms/title> "listTools" ;
    <http://purl.org/dc/terms/description> "Capability to return the set of available MCP tools. In source code this is invoked at initialization (await mcp.listTools()) to populate the agent's tools." .

# Configuration entries describing the registry server process as provided to the MCP client
:mcpClientRegistryServerCommandConfig a :Config ;
    :configKey "servers.registry.command" ;
    :configValue "node" ;
    <http://purl.org/dc/terms/description> "Command to launch the registry server process (as configured for the MCP client 'registry' server)." .

:mcpClientRegistryServerArgsConfig a :Config ;
    :configKey "servers.registry.args" ;
    :configValue "../../packages/mcp-registry-registry/dist/stdio.js" ;
    <http://purl.org/dc/terms/description> "Arguments for the registry server process; path to stdio.js script as configured in the MCP client." .

# Concrete tool representing the registry server that the agent uses (returned by mcp.listTools())
:mcpRegistryTool a :Tool ;
    <http://purl.org/dc/terms/title> "MCP Registry Tool" ;
    <http://purl.org/dc/terms/description> """Tool instance representing the MCP registry server process launched via the configured command. In the source the agent's tools are populated by await mcp.listTools(); the registry server is configured to run as a node process and communicate over stdio (path: ../../packages/mcp-registry-registry/dist/stdio.js).""" ;
    :hasToolConfig :mcpRegistryToolCommandConfig ,
                   :mcpRegistryToolArgsConfig ;
    :hasCapability :mcpClientListToolsCapability .

:mcpRegistryToolCommandConfig a :Config ;
    :configKey "command" ;
    :configValue "node" ;
    <http://purl.org/dc/terms/description> "Executable command configured to start the registry tool server." .

:mcpRegistryToolArgsConfig a :Config ;
    :configKey "args" ;
    :configValue "../../packages/mcp-registry-registry/dist/stdio.js" ;
    <http://purl.org/dc/terms/description> "Argument specifying the registry server entrypoint script path." .

# Link agent to the MCP client as the mechanism used to obtain tools (semantic linkage via tool usage)
# Note: agentToolUsage is an object property intended to denote tools used by an agent
:mcpRegistryAgent :agentToolUsage :mcpClient .

#################################################################
# Tasks and prompts preserved from agent instructions / responsibilities
#################################################################

# Task that the agent performs (semantically described from the agent's instructions)
:searchMCPRegistriesTask a :Task ;
    <http://purl.org/dc/terms/title> "Search MCP Registries" ;
    <http://purl.org/dc/terms/description> """Task performed by the MCP Registry Agent: search for registries by ID, tag, or name. This task uses the agent prompt (instructions) and the MCP Registry Tool / MCP Client to obtain information about registries.""" ;
    :performedByAgent :mcpRegistryAgent ;
    :taskPrompt :searchMCPRegistriesTaskPrompt ;
    :contributesToObjective :provideRegistryDiscoveryObjective .

:searchMCPRegistriesTaskPrompt a :Prompt ;
    :promptInstruction """Search for MCP registries by ID, tag, or name. Use available MCP tools (as provided by the MCP client) to fetch metadata and list registries. Provide concise, helpful registry information and references when available.""" ;
    :promptContext "Task-level prompt that represents user query / task-specific instructions; derived from the agent's general instructions." .

:provideRegistryDiscoveryObjective a :Objective ;
    <http://purl.org/dc/terms/title> "Provide registry discovery and lookup" ;
    <http://purl.org/dc/terms/description> "Objective for the MCP Registry Agent and Team: enable searching and retrieving MCP registry information by ID, tag, or name." .

#################################################################
# Additional metadata and relationships to support reconstruction
#################################################################

# Indicate that the Mastra Team follows a simple single-agent workflow pattern (not elaborate in source)
:mastraSimpleWorkflow a :WorkflowPattern ;
    <http://purl.org/dc/terms/title> "Mastra single-agent registry lookup workflow" ;
    <http://purl.org/dc/terms/description> "A minimal workflow pattern capturing a single LLM agent (MCP Registry Agent) that uses a client to enumerate tools and perform registry lookup tasks." ;
    :hasWorkflowStep :startStepInitializeAgent , :stepPerformSearch , :endStepComplete .

:startStepInitializeAgent a :StartStep ;
    rdfs:label "Initialize Agent" ;
    :hasAssociatedTask :initializeAgentTask ;
    :stepOrder 1 .

:initializeAgentTask a :Task ;
    <http://purl.org/dc/terms/title> "Initialize agent and discover tools" ;
    <http://purl.org/dc/terms/description> "Initialization task where the MCP client is queried (listTools()) and the agent's tools collection is populated." ;
    :performedByAgent :mcpRegistryAgent ;
    :producedResource :mcpRegistryTool .

:stepPerformSearch a :WorkflowStep ;
    rdfs:label "Perform registry search" ;
    :hasAssociatedTask :searchMCPRegistriesTask ;
    :stepOrder 2 .

:endStepComplete a :EndStep ;
    rdfs:label "Complete" ;
    :hasAssociatedTask :finalizeTask ;
    :stepOrder 3 .

:finalizeTask a :Task ;
    <http://purl.org/dc/terms/title> "Finalize and report results" ;
    <http://purl.org/dc/terms/description> "Task to finalize the search operation and present results (formatting, references)." ;
    :performedByAgent :mcpRegistryAgent .

#################################################################
# Notes: provenance-ish metadata (capturing that the code referenced openai and MCPClient)
#################################################################

:mcpRegistryAgent <http://purl.org/dc/terms/reference> "src/mastra/agents/index.ts" .
:mastraSystem <http://purl.org/dc/terms/reference> "src/mastra/index.ts" .
:mcpClient <http://purl.org/dc/terms/reference> "src/mastra/agents/index.ts (MCPClient configuration: servers.registry.command + args)" .

# End of instance definitions.