# Execution time: 122.08 seconds
# Model used: gpt-5-mini

# Issues / Assumptions:
# - The ontology does not provide explicit constructs to represent state-graph edges, conditional routing logic (function code), or tool binding semantics (e.g., "bindTools" behavior). I represent routing logic and branching as workflow steps and nextStep relations, but cannot capture programmatic conditional behavior or the runtime "state.next" evaluation precisely.
# - The ontology lacks a property to model enumeration schemas, zod schemas, or typed tool arguments; enum values and schema descriptions are included as literals inside Prompt.promptInstruction or Prompt.promptContext.
# - Code-specific artifacts (utility functions such as formatMessages, SDK usage, TypeScript types, and state graph compilation) are not modeled; instead their semantic intent (message formatting, routing decision based on latest message, supervisory configuration) is captured in prompts, configs, and comments.
# - There is no property to model multi-key config objects with clear key→value grouping; configKey / configValue on Config individuals are used (one pair per Config individual) to preserve each configuration parameter without inventing new classes or properties.
# - Runtime tool invocation details (e.g., tool_call object structure returned by an LLM, or use of response.tool_calls) are represented as expected task outputs in literal promptOutputIndicator fields.
# - No UI-specific constructs (nodes as UI components) are represented — nodes are modeled as WorkflowSteps and Tasks to capture semantic behavior.

@prefix : <http://www.w3id.org/agentic-ai/onto#> .
@prefix pp: <http://purl.org/net/p-plan#> .
@prefix beam: <http://w3id.org/beam/core#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix dcterms: <http://purl.org/dc/terms/> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

#################################################################
# Instances describing the "Generative UI Agent" solution
#################################################################

# High-level agent representing the Supervisor / StateGraph
:GenerativeUIAgent rdf:type :LLMAgent ;
    rdfs:label "Generative UI Agent" ;
    :agentID "generative-ui-supervisor" ;
    :agentRole "supervisor" ;
    :hasAgentConfig :SupervisorConfig_model ,
                    :SupervisorConfig_temperature ,
                    :SupervisorConfig_maxTokens ,
                    :SupervisorConfig_systemPrompt ;
    :hasWorkflowPattern :GenerativeUIWorkflow ;
    :hasPrompt :SupervisorSystemPrompt ;
    :useLanguageModel :LM_Anthropic_Claude3_7 ;
    rdfs:comment "Supervisor agent coordinating routing and delegation to tool agents and tool nodes." .

# Supervisor configuration (explicit key/value pairs modelled as separate Config individuals)
:SupervisorConfig_model rdf:type :Config ;
    :configKey "model" ;
    :configValue "anthropic/claude-3-7-sonnet-latest" ;
    rdfs:comment "Default model id to use for reflection generation; captured from SupervisorZodConfiguration." .

:SupervisorConfig_temperature rdf:type :Config ;
    :configKey "temperature" ;
    :configValue "0.7" ;
    rdfs:comment "Default temperature for reflection generation (0.7)." .

:SupervisorConfig_maxTokens rdf:type :Config ;
    :configKey "maxTokens" ;
    :configValue "1000" ;
    rdfs:comment "Default maximum tokens for generation (1000)." .

:SupervisorConfig_systemPrompt rdf:type :Config ;
    :configKey "systemPrompt" ;
    :configValue "" ;
    rdfs:comment "Optional systemPrompt (left empty by default in code). Included as a placeholder to preserve the option." .

# Global system-level prompt stored as an explicit Prompt instance (Supervisor-level)
:SupervisorSystemPrompt rdf:type :Prompt ;
    :promptInstruction """Supervisor annotation and orchestration configuration (semantic): This agent is the root controller for a state graph that routes user inputs to specialized tools/agents. It stores configuration for default model, temperature, and max tokens; it delegates routing to a router step and final handling to specialized tool steps.""" ;
    :promptContext """This prompt records the supervisory intent and default generation parameters (refer to SupervisorConfig_* instances for exact values).""" .

###############################################################################
# Language Models used by different nodes (statistical models)
###############################################################################
:LM_Anthropic_Claude3_7 rdf:type :LanguageModel ;
    dcterms:title "anthropic/claude-3-7-sonnet-latest" ;
    dcterms:description "Default model referenced by SupervisorZodConfiguration (label: Claude 3.7 Sonnet)." .

:LM_Gemini_2_0_flash rdf:type :LanguageModel ;
    dcterms:title "gemini-2.0-flash" ;
    dcterms:description "Model used by the router node for deterministic routing (temperature 0)." .

:LM_GPT_4o_mini rdf:type :LanguageModel ;
    dcterms:title "gpt-4o-mini" ;
    dcterms:description "Model used by the generalInput node to answer general queries (temperature 0)." .

###############################################################################
# Tools available to the system (as described in ALL_TOOL_DESCRIPTIONS)
###############################################################################
:Tool_stockbroker rdf:type :Tool ;
    rdfs:label "stockbroker" ;
    rdfs:comment "Can fetch the price of a ticker, purchase/sell a ticker, or get the user's portfolio." ;
    :hasCapability :Capability_fetchTicker , :Capability_tradeTicker , :Capability_getPortfolio ;
    :hasToolConfig :ToolStockbrokerConfig .

:Tool_tripPlanner rdf:type :Tool ;
    rdfs:label "tripPlanner" ;
    rdfs:comment "Helps the user plan their trip. It can suggest restaurants and places to stay in any given location." ;
    :hasCapability :Capability_suggestRestaurants , :Capability_suggestAccommodations ;
    :hasToolConfig :ToolTripPlannerConfig .

:Tool_openCode rdf:type :Tool ;
    rdfs:label "openCode" ;
    rdfs:comment "Can write a React TODO app for the user. Only call this tool if the user requests a TODO app." ;
    :hasCapability :Capability_writeReactTodo ;
    :hasToolConfig :ToolOpenCodeConfig .

:Tool_orderPizza rdf:type :Tool ;
    rdfs:label "orderPizza" ;
    rdfs:comment "Can order a pizza for the user." ;
    :hasCapability :Capability_orderPizza ;
    :hasToolConfig :ToolOrderPizzaConfig .

:Tool_writerAgent rdf:type :Tool ;
    rdfs:label "writerAgent" ;
    rdfs:comment "Can write a text document for the user. Only call this tool if they request a text document." ;
    :hasCapability :Capability_writeDocument ;
    :hasToolConfig :ToolWriterAgentConfig .

:Tool_router rdf:type :Tool ;
    rdfs:label "router" ;
    rdfs:comment "A tool used by the router node to select which tool should handle the user's query (routes: stockbroker, tripPlanner, openCode, orderPizza, generalInput, writerAgent)." ;
    :hasCapability :Capability_routeSelection ;
    :hasToolConfig :ToolRouterConfig .

:Tool_generalInput rdf:type :Tool ;
    rdfs:label "generalInput" ;
    rdfs:comment "Tool/node that responds to general user inputs and summarizes or follows up on tool results." ;
    :hasCapability :Capability_generalAssistant ;
    :hasToolConfig :ToolGeneralInputConfig .

###############################################################################
# Tool Configurations (one per key/value pair to preserve exact settings)
###############################################################################
:ToolRouterConfig_model rdf:type :Config ;
    :configKey "model" ;
    :configValue "gemini-2.0-flash" ;
    rdfs:comment "Router LLM model" .

:ToolRouterConfig_temperature rdf:type :Config ;
    :configKey "temperature" ;
    :configValue "0" ;
    rdfs:comment "Router uses deterministic temperature 0" .

:ToolRouterConfig_tags rdf:type :Config ;
    :configKey "tags" ;
    :configValue "langsmith:nostream" ;
    rdfs:comment "Router sets tags when calling and binding the tool" .

:ToolStockbrokerConfig rdf:type :Config ;
    :configKey "description" ;
    :configValue "can fetch the price of a ticker, purchase/sell a ticker, or get the user's portfolio" .

:ToolTripPlannerConfig rdf:type :Config ;
    :configKey "description" ;
    :configValue "helps the user plan their trip. it can suggest restaurants, and places to stay in any given location." .

:ToolOpenCodeConfig rdf:type :Config ;
    :configKey "description" ;
    :configValue "can write a React TODO app for the user. Only call this tool if they request a TODO app." .

:ToolOrderPizzaConfig rdf:type :Config ;
    :configKey "description" ;
    :configValue "can order a pizza for the user" .

:ToolWriterAgentConfig rdf:type :Config ;
    :configKey "description" ;
    :configValue "can write a text document for the user. Only call this tool if they request a text document." .

:ToolGeneralInputConfig_model rdf:type :Config ;
    :configKey "model" ;
    :configValue "gpt-4o-mini" ;
    rdfs:comment "Model used by generalInput node." .

:ToolGeneralInputConfig_temperature rdf:type :Config ;
    :configKey "temperature" ;
    :configValue "0" ;
    rdfs:comment "Deterministic behavior for follow-up and summarization." .

###############################################################################
# Capabilities (fine-grained abilities referenced by tools)
###############################################################################
:Capability_fetchTicker rdf:type :Capability ;
    rdfs:label "fetch ticker price" ;
    rdfs:comment "Fetch the price of a stock ticker." .

:Capability_tradeTicker rdf:type :Capability ;
    rdfs:label "trade ticker" ;
    rdfs:comment "Purchase or sell a ticker (trade operation)." .

:Capability_getPortfolio rdf:type :Capability ;
    rdfs:label "get portfolio" ;
    rdfs:comment "Retrieve the user's portfolio." .

:Capability_suggestRestaurants rdf:type :Capability ;
    rdfs:label "suggest restaurants" ;
    rdfs:comment "Suggest restaurants for a given location." .

:Capability_suggestAccommodations rdf:type :Capability ;
    rdfs:label "suggest accommodations" ;
    rdfs:comment "Suggest places to stay for a trip." .

:Capability_writeReactTodo rdf:type :Capability ;
    rdfs:label "write React TODO app" ;
    rdfs:comment "Generate a React TODO application when requested." .

:Capability_orderPizza rdf:type :Capability ;
    rdfs:label "order pizza" ;
    rdfs:comment "Order a pizza on behalf of the user." .

:Capability_writeDocument rdf:type :Capability ;
    rdfs:label "write document" ;
    rdfs:comment "Produce a text document for the user." .

:Capability_routeSelection rdf:type :Capability ;
    rdfs:label "route selection" ;
    rdfs:comment "Analyze conversation and select appropriate tool route." .

:Capability_generalAssistant rdf:type :Capability ;
    rdfs:label "general assistant" ;
    rdfs:comment "Generic assistant capabilities to answer queries, summarize tool results, and follow up." .

###############################################################################
# Workflow Pattern and Steps (mapping nodes in StateGraph to workflow steps)
###############################################################################
:GenerativeUIWorkflow rdf:type :WorkflowPattern ;
    rdfs:label "Generative UI Agent Workflow" ;
    rdfs:comment "High-level workflow corresponding to the StateGraph; start at router, branch to specialized tool steps, then end." ;
    :hasWorkflowStep :RouterStep ,
                     :StockbrokerStep ,
                     :TripPlannerStep ,
                     :OpenCodeStep ,
                     :OrderPizzaStep ,
                     :GeneralInputStep ,
                     :WriterAgentStep ,
                     :EndStep_Generic .

# Router is the start step
:RouterStep rdf:type :StartStep ;
    rdfs:label "Router Step" ;
    :hasAssociatedTask :RouterTask ;
    rdfs:comment "Analyzes the most recent user message (with conversation context) and selects the next tool route." ;
    :nextStep :StockbrokerStep , :TripPlannerStep , :OpenCodeStep , :OrderPizzaStep , :GeneralInputStep , :WriterAgentStep .

# Each tool step corresponds to the node's final step; these are modelled as EndStep for simplicity
:StockbrokerStep rdf:type :EndStep ;
    rdfs:label "Stockbroker Step" ;
    :hasAssociatedTask :StockbrokerTask .

:TripPlannerStep rdf:type :EndStep ;
    rdfs:label "Trip Planner Step" ;
    :hasAssociatedTask :TripPlannerTask .

:OpenCodeStep rdf:type :EndStep ;
    rdfs:label "Open Code Step" ;
    :hasAssociatedTask :OpenCodeTask .

:OrderPizzaStep rdf:type :EndStep ;
    rdfs:label "Order Pizza Step" ;
    :hasAssociatedTask :OrderPizzaTask .

:GeneralInputStep rdf:type :EndStep ;
    rdfs:label "General Input Step" ;
    :hasAssociatedTask :GeneralInputTask .

:WriterAgentStep rdf:type :EndStep ;
    rdfs:label "Writer Agent Step" ;
    :hasAssociatedTask :WriterAgentTask .

:EndStep_Generic rdf:type :EndStep ;
    rdfs:label "End Step (Generic)" ;
    rdfs:comment "Generic end step used by the graph to mark completion after a node returns control." .

###############################################################################
# Tasks corresponding to nodes (semantic activities)
###############################################################################
:RouterTask rdf:type :Task ;
    rdfs:label "Router Task" ;
    :performedBy :Tool_router ;
    :requiresResource :RouterPrompt ;
    :producedResource :RouterToolCallResult ;
    :contributesToObjective :Objective_routeSelection ;
    rdfs:comment "Examines the conversation to choose which tool to call next; uses deterministic LLM call and a small tool schema." .

:StockbrokerTask rdf:type :Task ;
    rdfs:label "Stockbroker Task" ;
    :performedBy :Tool_stockbroker ;
    :contributesToObjective :Objective_handleUserQuery ;
    :producedResource :StockbrokerResultResource ;
    rdfs:comment "Handles requests related to stock price lookup, trades, and portfolio queries." .

:TripPlannerTask rdf:type :Task ;
    rdfs:label "Trip Planner Task" ;
    :performedBy :Tool_tripPlanner ;
    :contributesToObjective :Objective_handleUserQuery ;
    :producedResource :TripPlannerResultResource ;
    rdfs:comment "Handles trip planning requests including suggestions for restaurants and accommodations." .

:OpenCodeTask rdf:type :Task ;
    rdfs:label "Open Code Task" ;
    :performedBy :Tool_openCode ;
    :contributesToObjective :Objective_handleUserQuery ;
    :producedResource :OpenCodeResultResource ;
    rdfs:comment "Produces a React TODO application when requested." .

:OrderPizzaTask rdf:type :Task ;
    rdfs:label "Order Pizza Task" ;
    :performedBy :Tool_orderPizza ;
    :contributesToObjective :Objective_handleUserQuery ;
    :producedResource :OrderPizzaResultResource ;
    rdfs:comment "Performs the pizza ordering flow." .

:GeneralInputTask rdf:type :Task ;
    rdfs:label "General Input Task" ;
    :performedBy :Tool_generalInput ;
    :requiresResource :GeneralInputPrompt ;
    :producedResource :GeneralInputResponseResource ;
    :contributesToObjective :Objective_handleUserQuery ;
    rdfs:comment "Handles other general queries and summarizes tool results or follow-ups." .

:WriterAgentTask rdf:type :Task ;
    rdfs:label "Writer Agent Task" ;
    :performedBy :Tool_writerAgent ;
    :contributesToObjective :Objective_handleUserQuery ;
    :producedResource :WriterAgentDocumentResource ;
    rdfs:comment "Generates text documents on user request." .

###############################################################################
# Prompts and prompt content (preserve all prompt text and tool schema)
###############################################################################
# The ALL_TOOL_DESCRIPTIONS string (captured as a Prompt so it can be reused)
:ALL_TOOL_DESCRIPTIONS_Prompt rdf:type :Prompt ;
    :promptInstruction """- stockbroker: can fetch the price of a ticker, purchase/sell a ticker, or get the user's portfolio
- tripPlanner: helps the user plan their trip. it can suggest restaurants, and places to stay in any given location.
- openCode: can write a React TODO app for the user. Only call this tool if they request a TODO app.
- orderPizza: can order a pizza for the user
- writerAgent: can write a text document for the user. Only call this tool if they request a text document.""" ;
    rdfs:label "ALL_TOOL_DESCRIPTIONS" ;
    rdfs:comment "Canonical description of available tools used by router and generalInput system prompts." .

# Router prompt (full instruction as literal)
:RouterPrompt rdf:type :Prompt ;
    rdfs:label "Router Prompt" ;
    :promptInstruction """You're a highly helpful AI assistant, tasked with routing the user's query to the appropriate tool.
You should analyze the user's input, and choose the appropriate tool to use.""" ;
    :promptContext """Router tool schema: { route: enum [ "stockbroker", "tripPlanner", "openCode", "orderPizza", "generalInput", "writerAgent" ] }. 
The router receives conversation history and must choose a route based on the most recent message in context. The router uses ALL_TOOL_DESCRIPTIONS to inform choices.""" ;
    :promptInputData """Conversation history (all messages except the last) and the most recent message; the router should prefer specific tools when user intent matches a tool description and otherwise choose 'generalInput'. """ ;
    :promptOutputIndicator """A tool call result indicating selected route, e.g., { "route": "stockbroker" }.""" ;
    rdfs:comment "Prompt used by the router node; contains the system instruction and schema description used for tool selection." .

# General Input system prompt
:GeneralInputPrompt rdf:type :Prompt ;
    rdfs:label "General Input System Prompt" ;
    :promptInstruction """You are an AI assistant.
If the user asks what you can do, describe these tools.
- stockbroker: can fetch the price of a ticker, purchase/sell a ticker, or get the user's portfolio
- tripPlanner: helps the user plan their trip. it can suggest restaurants, and places to stay in any given location.
- openCode: can write a React TODO app for the user. Only call this tool if they request a TODO app.
- orderPizza: can order a pizza for the user
- writerAgent: can write a text document for the user. Only call this tool if they request a text document.

If the last message is a tool result, describe what the action was, congratulate the user, or send a friendly followup in response to the tool action. Ensure this is a clear and concise message.

Otherwise, just answer as normal.""" ;
    :promptContext """Used by the generalInput node. When receiving tool results, present a friendly summary or follow-up; otherwise behave as a normal assistant. Uses ALL_TOOL_DESCRIPTIONS for tool listing answers.""" ;
    :promptOutputIndicator """A direct assistant response message or summary of the tool action.""" .

###############################################################################
# Resources produced by tasks (tool outputs)
###############################################################################
:RouterToolCallResult rdf:type beam:Resource ;
    dcterms:description "Result of router tool indicating chosen route, e.g., { 'route': 'stockbroker' }." ;
    rdfs:label "Router tool call result" .

:StockbrokerResultResource rdf:type beam:Resource ;
    dcterms:description "Resource representing the output(s) of stockbroker tasks such as price data, trade confirmations, or portfolio summaries." ;
    rdfs:label "Stockbroker result" .

:TripPlannerResultResource rdf:type beam:Resource ;
    dcterms:description "Trip planning suggestions (restaurants, accommodations, itinerary)." ;
    rdfs:label "TripPlanner result" .

:OpenCodeResultResource rdf:type beam:Resource ;
    dcterms:description "Generated code artifact: a React TODO app (source files, instructions)." ;
    rdfs:label "OpenCode result" .

:OrderPizzaResultResource rdf:type beam:Resource ;
    dcterms:description "Confirmation and details of pizza order (order receipt, status)." ;
    rdfs:label "OrderPizza result" .

:GeneralInputResponseResource rdf:type beam:Resource ;
    dcterms:description "Text response from the general assistant (answers, summaries, follow-ups)." ;
    rdfs:label "GeneralInput response" .

:WriterAgentDocumentResource rdf:type beam:Resource ;
    dcterms:description "Text document created by writerAgent (full content of the requested document)." ;
    rdfs:label "WriterAgent document" .

###############################################################################
# Objectives and Goals
###############################################################################
:Objective_handleUserQuery rdf:type :Objective ;
    rdfs:label "Handle user query" ;
    rdfs:comment "Collective objective: respond to and fulfill a user's request by delegating to appropriate tools and providing final responses." ;
    :contributesToGoal :Goal_provideAssistance .

:Objective_routeSelection rdf:type :Objective ;
    rdfs:label "Route selection" ;
    rdfs:comment "Objective focused on selecting the appropriate tool for a given user query." ;
    :contributesToGoal :Goal_provideAssistance .

:Goal_provideAssistance rdf:type :Goal ;
    rdfs:label "Provide assistance to user" ;
    rdfs:comment "High-level goal of the Generative UI Agent system: deliver useful responses and complete user tasks." .

###############################################################################
# Additional relationships connecting agent, tools, workflow, and models
###############################################################################
# The supervisor instructs and operates in the workflow
:GenerativeUIAgent :hasWorkflowPattern :GenerativeUIWorkflow .

# Associate prompts to tasks (router and general input)
:RouterTask :taskPrompt :RouterPrompt .
:GeneralInputTask :taskPrompt :GeneralInputPrompt .

# Tools are used (agent tool usage). The LLMAgent delegates to tools (agentToolUsage)
:GenerativeUIAgent :agentToolUsage :Tool_router ,
                              :Tool_stockbroker ,
                              :Tool_tripPlanner ,
                              :Tool_openCode ,
                              :Tool_orderPizza ,
                              :Tool_writerAgent ,
                              :Tool_generalInput .

# Link tools to the language models they typically employ (semantic connection)
:Tool_router :hasToolConfig :ToolRouterConfig_model , :ToolRouterConfig_temperature , :ToolRouterConfig_tags ;
    rdfs:comment "Router LLM configuration (gemini-2.0-flash, temperature 0, tags metadata)." .

:Tool_generalInput :hasToolConfig :ToolGeneralInputConfig_model , :ToolGeneralInputConfig_temperature ;
    rdfs:comment "General input node configuration (gpt-4o-mini, temperature 0)." .

# Where relevant, link the LLM models semantically to the supervisor (knowledge of available models)
:GenerativeUIAgent :useLanguageModel :LM_Anthropic_Claude3_7 , :LM_Gemini_2_0_flash , :LM_GPT_4o_mini .

#################################################################
# End of instances
#################################################################