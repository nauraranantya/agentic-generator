# Execution time: 83.98 seconds
# Model used: gpt-5-mini

# Issues / Assumptions:
# - The ontology lacks constructs for modeling transient runtime concepts such as message sequences, tool_call_id, UUIDs, and timed sleeps/delays; these are represented as literals (descriptions) where necessary.
# - The ontology does not provide a dedicated property/class to represent structured-output schemas (e.g., Zod schemas) or typed function-like tool calls; these schemas are therefore captured verbatim in Prompt.promptInputData and Config configKey/configValue pairs.
# - There is no explicit property for associating a Task with a model invocation result or tool call metadata (e.g., tool_call_id). Such metadata is captured in resource descriptions (dcterms:description).
# - The StateGraph and UI Annotation constructs (framework-specific) are not modeled; their semantic intent (workflow with ordered steps and tasks) is expressed using WorkflowPattern, WorkflowStep, Task, stepOrder, nextStep, and hasAssociatedTask.
# - The ontology cannot represent asynchronous behavior or execution/runtime ordering besides stepOrder and nextStep.
# - No new classes or properties were added; all information is expressed using existing classes/properties and literals.

@prefix : <http://www.w3id.org/agentic-ai/onto#> .
@prefix pp: <http://purl.org/net/p-plan#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix xml: <http://www.w3.org/XML/1998/namespace> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .
@prefix beam: <http://w3id.org/beam/core#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@base <http://www.w3id.org/agentic-ai/onto#> .

#################################################################
# Instances describing the "Order Pizza Graph" agent solution
#################################################################

### Workflow pattern (the compiled graph)
:OrderPizzaGraph rdf:type :WorkflowPattern ;
    rdfs:label "Order Pizza Graph" ;
    <http://purl.org/dc/terms/title> "Order Pizza Graph" ;
    :hasWorkflowStep :step_findStore , :step_orderPizza ;
    rdfs:comment "Workflow pattern representing the compiled StateGraph named 'Order Pizza Graph' with two steps: findStore -> orderPizza." .

### Workflow steps (Start and End)
:step_findStore rdf:type :StartStep ;
    rdfs:label "Find Store Step" ;
    :stepOrder 1 ;
    :hasAssociatedTask :task_findStore ;
    :nextStep :step_orderPizza ;
    rdfs:comment "Initial workflow step corresponding to the 'findStore' node. It invokes a model to extract the user's location and optional pizza company and then returns tool output with a store info message." .

:step_orderPizza rdf:type :EndStep ;
    rdfs:label "Order Pizza Step" ;
    :stepOrder 2 ;
    :hasAssociatedTask :task_orderPizza ;
    rdfs:comment "Final workflow step corresponding to the 'orderPizza' node. It invokes a model to extract ordering details (address, phone_number, order) and returns an order confirmation tool response." .

### Tasks (semantic actions executed in each node)
:task_findStore rdf:type :Task ;
    rdfs:label "Find Pizza Shop Task" ;
    :taskPrompt :prompt_findShop ;
    :performedByAgent :agent_pizzaOrderer ;
    :performedBy :tool_pizzaFinder ;
    :requiresResource :res_userLocation , :res_pizzaCompanyName ;
    :producedResource :res_storeInfo ;
    :hasConfig :config_findShop ;
    rdfs:comment "Task that extracts location and optional pizza company and returns store information." .

:task_orderPizza rdf:type :Task ;
    rdfs:label "Place Pizza Order Task" ;
    :taskPrompt :prompt_placeOrder ;
    :performedByAgent :agent_pizzaOrderer ;
    :performedBy :tool_pizzaOrderingSystem ;
    :requiresResource :res_storeInfo , :res_orderDetails ;
    :producedResource :res_orderConfirmation ;
    :hasConfig :config_placeOrder ;
    rdfs:comment "Task that extracts address, phone_number, and order details and places the pizza order via an ordering tool; returns an order confirmation." .

### Agent (LLM-based agent that performs tasks)
:agent_pizzaOrderer rdf:type :LLMAgent ;
    rdfs:label "PizzaOrdererAgent" ;
    :agentID "PizzaOrderer-v1" ;
    :agentRole "pizza-ordering-assistant" ;
    :useLanguageModel :lm_claude3 ;
    :hasAgentConfig :config_agent_global ;
    :agentPrompt :prompt_agent_system ;
    rdfs:comment "LLM Agent that executes the workflow steps. Uses a Claude model with deterministic temperature=0 and structured output for each node invocation." .

### Language Model used by the agent
:lm_claude3 rdf:type :LanguageModel ;
    rdfs:label "claude-3-5-sonnet-latest" ;
    <http://purl.org/dc/terms/description> "Statistical language model used by the LLMAgent. Name provided in code: 'claude-3-5-sonnet-latest'." .

### Tools (external/tool abstractions represented by ToolMessage in code)
:tool_pizzaFinder rdf:type :Tool ;
    rdfs:label "Pizza Finder Tool" ;
    :hasCapability :cap_findStore ;
    :hasToolConfig :config_tool_pizzaFinder ;
    rdfs:comment "Represents the external lookup mechanism that returns store contact information. In code this is emulated by constructing a ToolMessage with found shop details." .

:tool_pizzaOrderingSystem rdf:type :Tool ;
    rdfs:label "Pizza Ordering System" ;
    :hasCapability :cap_placeOrder ;
    :hasToolConfig :config_tool_pizzaOrdering ;
    rdfs:comment "Represents the external ordering mechanism that places the pizza order and returns confirmation. In code this is emulated by constructing a ToolMessage 'Pizza order successfully placed.'." .

### Tool capabilities
:cap_findStore rdf:type :Capability ;
    rdfs:label "find_store" ;
    rdfs:comment "Capability to find a pizza shop given a location and optional company name." .

:cap_placeOrder rdf:type :Capability ;
    rdfs:label "place_order" ;
    rdfs:comment "Capability to place a pizza order given store contact and order details." .

### Prompts (system instructions + structured schemas captured verbatim)
:prompt_agent_system rdf:type :Prompt ;
    rdfs:label "Agent System Prompt (general)" ;
    :promptInstruction "You are a helpful AI assistant, tasked with extracting information from the conversation between you, and the user, in order to find a pizza shop for them." ;
    :promptContext "General system role description used by both nodes as the system message." ;
    rdfs:comment "Generic system instruction string used as the model 'system' message in the workflow graph. (Appears in each model invocation.)" .

:prompt_findShop rdf:type :Prompt ;
    rdfs:label "Find Pizza Shop Prompt" ;
    :promptInstruction "You are a helpful AI assistant, tasked with extracting information from the conversation between you, and the user, in order to find a pizza shop for them." ;
    :promptContext "The model should output a structured response containing 'location' and optionally 'pizza_company' following the provided schema." ;
    :promptInputData """
Zod schema (literal captured from source code):
object({
  location: string().describe("The location the user is in. E.g. 'San Francisco' or 'New York'"),
  pizza_company: string().optional().describe("The name of the pizza company. E.g. 'Dominos' or 'Papa John's'. Optional, if not defined it will search for all pizza shops")
}).describe("The schema for finding a pizza shop for the user")
""" ;
    :promptOutputIndicator "Structured output named 'find_pizza_shop' with fields: location, pizza_company. includeRaw: true" ;
    rdfs:comment "Prompt and structured output schema used by the 'findStore' node. The schema and structured output metadata are preserved verbatim." .

:prompt_placeOrder rdf:type :Prompt ;
    rdfs:label "Place Pizza Order Prompt" ;
    :promptInstruction "You are a helpful AI assistant, tasked with placing an order for a pizza for the user." ;
    :promptContext "The model should output a structured response containing 'address', 'phone_number', and 'order' following the provided schema." ;
    :promptInputData """
Zod schema (literal captured from source code):
object({
  address: string().describe("The address of the store to order the pizza from"),
  phone_number: string().describe("The phone number of the store to order the pizza from"),
  order: string().describe("The full pizza order for the user")
}).describe("The schema for ordering a pizza for the user")
""" ;
    :promptOutputIndicator "Structured output named 'place_pizza_order' with fields: address, phone_number, order. includeRaw: true" ;
    rdfs:comment "Prompt and structured output schema used by the 'orderPizza' node. The schema and structured output metadata are preserved verbatim." .

### Resources (input parameters and produced artifacts)
:res_userLocation rdf:type beam:Resource ;
    rdfs:label "User Location (input)" ;
    <http://purl.org/dc/terms/description> "User-provided location string (e.g., 'San Francisco' or 'New York'). Required input for the findStore task." .

:res_pizzaCompanyName rdf:type beam:Resource ;
    rdfs:label "Pizza Company Name (optional input)" ;
    <http://purl.org/dc/terms/description> "Optional user-provided pizza company name (e.g., 'Dominos' or 'Papa John's')." .

:res_storeInfo rdf:type beam:Resource ;
    rdfs:label "Store Information (found store)" ;
    <http://purl.org/dc/terms/description> "Example produced content (from code's toolResponse): \"I've found a pizza shop at 1119 19th St, San Francisco, CA 94107. The phone number for the shop is 415-555-1234.\". Also includes link to the tool_call_id produced by the model call in runtime (tool_call_id captured in code), represented here as descriptive metadata." .

:res_orderDetails rdf:type beam:Resource ;
    rdfs:label "Order Details (input for placing order)" ;
    <http://purl.org/dc/terms/description> "Structured fields expected from place_pizza_order output: address (address of store), phone_number (store phone), order (full pizza order for the user)." .

:res_orderConfirmation rdf:type beam:Resource ;
    rdfs:label "Order Confirmation (produced resource)" ;
    <http://purl.org/dc/terms/description> "Example produced content (from code's toolResponse): \"Pizza order successfully placed.\". In runtime the tool_call_id linking the confirmation to the model/tool invocation is present; represented in this resource description." .

### Configurations (model and tool settings captured as Config instances)
:config_agent_global rdf:type :Config ;
    rdfs:label "Agent global config" ;
    :configKey "agent_framework" ;
    :configValue "StateGraph (langgraph) compiled into workflow 'Order Pizza Graph'." ;
    :configKey "agent_default_temperature" ;
    :configValue "0" ;
    rdfs:comment "High-level agent settings captured from code: default temperature and reference to StateGraph usage." .

:config_findShop rdf:type :Config ;
    rdfs:label "Find Shop Model Config" ;
    :configKey "model" ;
    :configValue "claude-3-5-sonnet-latest" ;
    :configKey "temperature" ;
    :configValue "0" ;
    :configKey "structured_output_name" ;
    :configValue "find_pizza_shop" ;
    :configKey "includeRaw" ;
    :configValue "true" ;
    rdfs:comment "Model invocation configuration used in the findStore node." .

:config_placeOrder rdf:type :Config ;
    rdfs:label "Place Order Model Config" ;
    :configKey "model" ;
    :configValue "claude-3-5-sonnet-latest" ;
    :configKey "temperature" ;
    :configValue "0" ;
    :configKey "structured_output_name" ;
    :configValue "place_pizza_order" ;
    :configKey "includeRaw" ;
    :configValue "true" ;
    rdfs:comment "Model invocation configuration used in the orderPizza node." .

:config_tool_pizzaFinder rdf:type :Config ;
    rdfs:label "Pizza Finder Tool Config" ;
    :configKey "emulated" ;
    :configValue "true" ;
    :configKey "example_response" ;
    :configValue "I've found a pizza shop at 1119 19th St, San Francisco, CA 94107. The phone number for the shop is 415-555-1234." ;
    rdfs:comment "Tool-side configuration / example response captured from code which constructs a ToolMessage." .

:config_tool_pizzaOrdering rdf:type :Config ;
    rdfs:label "Pizza Ordering Tool Config" ;
    :configKey "emulated" ;
    :configValue "true" ;
    :configKey "example_response" ;
    :configValue "Pizza order successfully placed." ;
    rdfs:comment "Tool-side configuration / example response captured from code which constructs a ToolMessage." .

#################################################################
# Additional linking: Workflow pattern -> agent / goals (semantic)
#################################################################

:OrderPizzaGoal rdf:type :Goal ;
    rdfs:label "Order Pizza Goal" ;
    <http://purl.org/dc/terms/description> "Top-level intent: find a pizza shop and place a pizza order for a user." .

:agent_pizzaOrderer :hasAgentGoal :OrderPizzaGoal .

#################################################################
# Provenance-like notes (captured as descriptions)
#################################################################

:task_findStore <http://purl.org/dc/terms/description> """
Source semantics captured from node 'findStore':
- Uses a structured model output with schema 'find_pizza_shop' to extract:
  { location: string, pizza_company?: string }
- System instruction: 'You are a helpful AI assistant, tasked with extracting information from the conversation between you, and the user, in order to find a pizza shop for them.'
- After model invocation, a ToolMessage is created with content:
  'I've found a pizza shop at 1119 19th St, San Francisco, CA 94107. The phone number for the shop is 415-555-1234.'
- The code includes an artificial delay (sleep) following the model call.
""" .

:task_orderPizza <http://purl.org/dc/terms/description> """
Source semantics captured from node 'orderPizza':
- Uses a structured model output with schema 'place_pizza_order' to extract:
  { address: string, phone_number: string, order: string }
- System instruction: 'You are a helpful AI assistant, tasked with placing an order for a pizza for the user.'
- After model invocation, a ToolMessage is created with content:
  'Pizza order successfully placed.'
- The code includes an artificial delay (sleep) prior to execution.
""" .

#################################################################
# End of instance data
#################################################################